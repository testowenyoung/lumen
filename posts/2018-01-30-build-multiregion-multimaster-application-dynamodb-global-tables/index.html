<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/lumen/styles.1d0daeadf0762b76da98.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/lumen/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/lumen/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/lumen/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/lumen/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/lumen/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/lumen/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/lumen/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/lumen/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/lumen/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/lumen/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/lumen/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/lumen/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/lumen/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/lumen/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/lumen/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/lumen/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/lumen/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/lumen/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/lumen/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/lumen/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/lumen/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/lumen/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/lumen/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/lumen/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/lumen/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/lumen/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/lumen/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/lumen/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/lumen/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/lumen/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/lumen/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/lumen/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/lumen/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/lumen/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/lumen/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/lumen/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/lumen/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/lumen/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/lumen/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/lumen/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/lumen/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/lumen/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/lumen/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/lumen/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/lumen/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/lumen/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/lumen/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/lumen/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/lumen/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/lumen/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/lumen/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/lumen/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.23.12"/><link rel="alternate" type="application/rss+xml" href="/lumen/rss.xml"/><link rel="icon" href="/lumen/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="manifest" href="/lumen/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/lumen/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/lumen/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/lumen/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/lumen/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/lumen/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/lumen/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/lumen/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/lumen/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><title data-react-helmet="true">Build a multi-region, multi-master application with Serverless and DynamoDB Global Tables | Gatsby Starter Blog</title><meta data-react-helmet="true" name="description" content="We&#x27;re going to create a multi-region, multi-master, geo-routed application—all in about 30 minutes."/><meta data-react-helmet="true" property="og:title" content="Build a multi-region, multi-master application with Serverless and DynamoDB Global Tables"/><meta data-react-helmet="true" property="og:description" content="We&#x27;re going to create a multi-region, multi-master, geo-routed application—all in about 30 minutes."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="kylemathews"/><meta data-react-helmet="true" name="twitter:title" content="Build a multi-region, multi-master application with Serverless and DynamoDB Global Tables"/><meta data-react-helmet="true" name="twitter:description" content="We&#x27;re going to create a multi-region, multi-master, geo-routed application—all in about 30 minutes."/><link as="script" rel="preload" href="/lumen/webpack-runtime-c76c0c9d42bc9bf56761.js"/><link as="script" rel="preload" href="/lumen/framework-5fc6169171e885c3b522.js"/><link as="script" rel="preload" href="/lumen/styles-cd63080e784be7b7e7cf.js"/><link as="script" rel="preload" href="/lumen/app-36e457a5393b79b99515.js"/><link as="script" rel="preload" href="/lumen/commons-4c36ffabef1434ec1126.js"/><link as="script" rel="preload" href="/lumen/cd7d5f864fc9e15ed8adef086269b0aeff617554-c8f68cb3ade1320f5257.js"/><link as="script" rel="preload" href="/lumen/component---src-templates-blog-post-js-e4c781a4720974cc2679.js"/><link as="fetch" rel="preload" href="/lumen/page-data/posts/2018-01-30-build-multiregion-multimaster-application-dynamodb-global-tables/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/lumen/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;color:inherit" href="/lumen/">Gatsby Starter Blog</a></h3></header><main><article><header><h1 style="margin-top:1.75rem;margin-bottom:0">Build a multi-region, multi-master application with Serverless and DynamoDB Global Tables</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem">January 30, 2018</p></header><section><p><em>To see how DynamoDB compares to MongoDB, Cassandra, or BigTable, <a href="https://serverless.com/dynamodb/">see here</a>.</em></p>
<p>AWS gives devs some <em>powerful</em> building blocks for making amazing applications. In this walkthrough, we’re going to create a multi-region, multi-master, geo-routed application—all in about 30 minutes.</p>
<p>We’ll have compute located on two different continents writing to databases in their own region, and the written data will be replicated to the database in the other region. Users will be directed to the closest region according to their location.</p>
<p>Prefer the video walkthrough? The webinar was recorded live, and <a href="https://cloudacademy.com/webinars/how-build-regionally-distributed-serverless-architecture-61/">is available on Cloud Academy</a>; give it a watch!</p>
<p>Now, on to the word-wise walkthrough.</p>
<h1>Setting up your app</h1>
<p>Before we begin, you’ll need the <a href="https://serverless.com/framework/docs/providers/aws/guide/quick-start/">Serverless Framework installed</a> with an AWS account set up. Your version of Serverless must be 1.25 or higher to take advantage of regional endpoints.</p>
<p>I’m going to write this in Python because I love Python. But you can do it in any language you want.</p>
<p>Create a new Serverless project from a template using the <code class="language-text">sls create</code> command and change into that directory:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ sls create -t aws-python3 -p serverless-multi-region
$ <span class="token builtin class-name">cd</span> serverless-multi-region</code></pre></div>
<h1>Basic functionality</h1>
<p>Our application will be a web API over a key-value store, where users can submit and retrieve values for keys. The path in the URL will be the key name, and the payload for a POST request will be the value.</p>
<p>To handle the basic functionality with our application, we’ll need three things:</p>
<ul>
<li>a DynamoDB table to store our keys and values,</li>
<li>a <code class="language-text">set_key</code> function to allow users to store the value for a key</li>
<li>a <code class="language-text">get_key</code> function to allow users to retrieve the value for a key</li>
</ul>
<p>Edit your <code class="language-text">serverless.yml</code> so that it looks as follows:</p>
<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token comment"># serverless.yml</span>

<span class="token key atrule">service</span><span class="token punctuation">:</span> serverless<span class="token punctuation">-</span>keyvalue

<span class="token key atrule">frameworkVersion</span><span class="token punctuation">:</span> <span class="token string">">=1.25.0"</span>

<span class="token key atrule">custom</span><span class="token punctuation">:</span>
  <span class="token key atrule">tableName</span><span class="token punctuation">:</span> <span class="token string">"keyvalues"</span>

<span class="token key atrule">provider</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> aws
  <span class="token key atrule">runtime</span><span class="token punctuation">:</span> python3.6
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> dev
  <span class="token key atrule">region</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>opt<span class="token punctuation">:</span>region<span class="token punctuation">}</span>
  <span class="token key atrule">endpointType</span><span class="token punctuation">:</span> regional
  <span class="token key atrule">iamRoleStatements</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">Effect</span><span class="token punctuation">:</span> <span class="token string">"Allow"</span>
      <span class="token key atrule">Action</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> dynamodb<span class="token punctuation">:</span>GetItem
        <span class="token punctuation">-</span> dynamodb<span class="token punctuation">:</span>PutItem
      <span class="token key atrule">Resource</span><span class="token punctuation">:</span>
        <span class="token key atrule">"Fn::GetAtt"</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> KeyValuesDynamoDBTable
            <span class="token punctuation">-</span> Arn
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token key atrule">KEY_TABLE</span><span class="token punctuation">:</span>
      <span class="token key atrule">Ref</span><span class="token punctuation">:</span> KeyValuesDynamoDBTable

<span class="token key atrule">functions</span><span class="token punctuation">:</span>
  <span class="token key atrule">getKey</span><span class="token punctuation">:</span>
    <span class="token key atrule">handler</span><span class="token punctuation">:</span> handlers/get_key.main
    <span class="token key atrule">events</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">http</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> /<span class="token punctuation">{</span>key<span class="token punctuation">}</span>
          <span class="token key atrule">method</span><span class="token punctuation">:</span> get
          <span class="token key atrule">cors</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">setKey</span><span class="token punctuation">:</span>
    <span class="token key atrule">handler</span><span class="token punctuation">:</span> handlers/set_key.main
    <span class="token key atrule">events</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">http</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> /<span class="token punctuation">{</span>key<span class="token punctuation">}</span>
          <span class="token key atrule">method</span><span class="token punctuation">:</span> post
          <span class="token key atrule">cors</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token key atrule">Resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">KeyValuesDynamoDBTable</span><span class="token punctuation">:</span>
      <span class="token key atrule">Type</span><span class="token punctuation">:</span> <span class="token string">'AWS::DynamoDB::Table'</span>
      <span class="token key atrule">Properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">TableName</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>self<span class="token punctuation">:</span>custom.tableName<span class="token punctuation">}</span>
        <span class="token key atrule">AttributeDefinitions</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span>
            <span class="token key atrule">AttributeName</span><span class="token punctuation">:</span> key
            <span class="token key atrule">AttributeType</span><span class="token punctuation">:</span> S
        <span class="token key atrule">KeySchema</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span>
            <span class="token key atrule">AttributeName</span><span class="token punctuation">:</span> key
            <span class="token key atrule">KeyType</span><span class="token punctuation">:</span> HASH
        <span class="token key atrule">ProvisionedThroughput</span><span class="token punctuation">:</span>
          <span class="token key atrule">ReadCapacityUnits</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">WriteCapacityUnits</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">StreamSpecification</span><span class="token punctuation">:</span>
          <span class="token key atrule">StreamViewType</span><span class="token punctuation">:</span> NEW_AND_OLD_IMAGES</code></pre></div>
<p>Let’s walk through this a bit.</p>
<p>In the <code class="language-text">resources</code> section, we’ve used CloudFormation to define our DynamoDB table. We’ve see it has a HASH key named “key”—this is the primary access pattern for our table.</p>
<p>In the <code class="language-text">provider</code> section, we’ve added <code class="language-text">iamRoleStatements</code> that give our functions GetItem and PutItem permissions to our table. We’ve also injected the name of the table into our environment via the <code class="language-text">KEY_TABLE</code> variable.</p>
<p>Also, note that we’re using a regional endpoint with <code class="language-text">endpointType: regional</code>. This was added in the <a href="https://serverless.com/blog/serverless-v1.25.0/">1.25 release of the Serverless Framework</a>, and it allows us to have our endpoint in a particular region, rather than at all CloudFront edge locations.</p>
<p>Finally, in the <code class="language-text">functions</code> section, we have our two functions: <code class="language-text">getKey</code> and <code class="language-text">setKey</code>. The function handlers are defined in the <code class="language-text">handlers</code> directory in the <code class="language-text">get_key</code> and <code class="language-text">set_key</code> modules.</p>
<p>Let’s add our handlers. First, remove the templated <code class="language-text">handler.py</code> and add a <code class="language-text">handlers</code> directory:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">rm</span> handler.py
$ <span class="token function">mkdir</span> handlers</code></pre></div>
<p>Add the code for your <code class="language-text">setKey</code> function in <code class="language-text">handlers/set_key.py</code>:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># handlers/set_key.py</span>

<span class="token keyword">import</span> json
<span class="token keyword">import</span> os

<span class="token keyword">import</span> boto3

KEY_TABLE_NAME <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'KEY_TABLE'</span><span class="token punctuation">]</span>
CLIENT <span class="token operator">=</span> boto3<span class="token punctuation">.</span>client<span class="token punctuation">(</span><span class="token string">'dynamodb'</span><span class="token punctuation">)</span>
REGION <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'AWS_REGION'</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    body <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    key <span class="token operator">=</span> event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'pathParameters'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
    value <span class="token operator">=</span> body<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token keyword">not</span> value<span class="token punctuation">:</span>
        response <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">"statusCode"</span><span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
            <span class="token string">"body"</span><span class="token punctuation">:</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token string">"Missing a value for 'value' in JSON body."</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> response

    <span class="token keyword">try</span><span class="token punctuation">:</span>
        CLIENT<span class="token punctuation">.</span>put_item<span class="token punctuation">(</span>
            TableName<span class="token operator">=</span>KEY_TABLE_NAME<span class="token punctuation">,</span>
            Item<span class="token operator">=</span><span class="token punctuation">{</span>
                <span class="token string">'key'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'S'</span><span class="token punctuation">:</span> key<span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'S'</span><span class="token punctuation">:</span> value<span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">'region'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'S'</span><span class="token punctuation">:</span> REGION<span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        response <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'statusCode'</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
            <span class="token string">'body'</span><span class="token punctuation">:</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string">'key'</span><span class="token punctuation">:</span> key<span class="token punctuation">,</span>
                <span class="token string">'value'</span><span class="token punctuation">:</span> value<span class="token punctuation">,</span>
                <span class="token string">'region'</span><span class="token punctuation">:</span> REGION
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
        response <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">"statusCode"</span><span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
            <span class="token string">"body"</span><span class="token punctuation">:</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token string">"Sorry, an error occurred while writing your key."</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

    <span class="token keyword">return</span> response</code></pre></div>
<p>We will parse the key name from the URL path parameter and the value from the JSON body in the POST request. Then we’ll save a DynamoDB Item with the key, value, and region it was written from.</p>
<p>Then, we’ll add the code for our <code class="language-text">getKey</code> function in <code class="language-text">handlers/get_key.py</code>:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># handlers/get_key.py</span>

<span class="token keyword">import</span> json
<span class="token keyword">import</span> os

<span class="token keyword">import</span> boto3

KEY_TABLE_NAME <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'KEY_TABLE'</span><span class="token punctuation">]</span>
CLIENT <span class="token operator">=</span> boto3<span class="token punctuation">.</span>client<span class="token punctuation">(</span><span class="token string">'dynamodb'</span><span class="token punctuation">)</span>
REGION <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'AWS_REGION'</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    key <span class="token operator">=</span> event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'pathParameters'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>

    <span class="token keyword">try</span><span class="token punctuation">:</span>
        resp <span class="token operator">=</span> CLIENT<span class="token punctuation">.</span>get_item<span class="token punctuation">(</span>
            TableName<span class="token operator">=</span>KEY_TABLE_NAME<span class="token punctuation">,</span>
            Key<span class="token operator">=</span><span class="token punctuation">{</span>
                <span class="token string">'key'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'S'</span><span class="token punctuation">:</span> key<span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        item <span class="token operator">=</span> resp<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Item'</span><span class="token punctuation">)</span>
        response <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'statusCode'</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
            <span class="token string">'body'</span><span class="token punctuation">:</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string">'key'</span><span class="token punctuation">:</span> item<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'S'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">'value'</span><span class="token punctuation">:</span> item<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'S'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">'writeRegion'</span><span class="token punctuation">:</span> item<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'region'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'S'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">'readRegion'</span><span class="token punctuation">:</span> REGION<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
        response <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">"statusCode"</span><span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
            <span class="token string">"body"</span><span class="token punctuation">:</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token string">"Sorry, an error occurred while retrieving your key."</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

    <span class="token keyword">return</span> response</code></pre></div>
<p>It takes the key from the path, retrieves it from DynamoDB, and returns it to the user. Note that it returns both the region it was last written from <em>and</em> the region that it’s currently being read from. This will be useful later on.</p>
<p>Great, let’s deploy it. I’m going to use the <code class="language-text">us-west-2</code> region:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ sls deploy --region us-west-2
Serverless: Packaging service<span class="token punctuation">..</span>.
<span class="token punctuation">..</span>.<span class="token operator">&lt;</span>snip<span class="token operator">></span><span class="token punctuation">..</span>.
Service Information
service: serverless-keyvalue
stage: dev
region: us-west-2
stack: serverless-keyvalue-dev
api keys:
  None
endpoints:
  GET - https://6rbm4350zj.execute-api.us-west-2.amazonaws.com/dev/<span class="token punctuation">{</span>key<span class="token punctuation">}</span>
  POST - https://6rbm4350zj.execute-api.us-west-2.amazonaws.com/dev/<span class="token punctuation">{</span>key<span class="token punctuation">}</span>
functions:
  getKey: serverless-keyvalue-dev-getKey
  setKey: serverless-keyvalue-dev-setKey</code></pre></div>
<p>If your deploy was successful, it will show your base url in the <code class="language-text">endpoints</code> block of your Service Information.</p>
<p>Let’s test our endpoints. Export your url into a variable called BASE_URL, then run a curl command to set a key:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">BASE_URL</span><span class="token operator">=</span><span class="token string">"https://6rbm4350zj.execute-api.us-west-2.amazonaws.com/dev/"</span>
$ <span class="token function">curl</span> -X POST <span class="token variable">${BASE_URL}</span>testkey -d <span class="token string">'{"value": "Just testing"}'</span>
<span class="token punctuation">{</span><span class="token string">"key"</span><span class="token builtin class-name">:</span> <span class="token string">"testkey"</span>, <span class="token string">"value"</span><span class="token builtin class-name">:</span> <span class="token string">"Just testing"</span>, <span class="token string">"region"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span><span class="token punctuation">}</span></code></pre></div>
<p>And now, let’s retrieve it:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> -X GET <span class="token variable">${BASE_URL}</span>testkey
<span class="token punctuation">{</span>
  <span class="token string">"key"</span><span class="token builtin class-name">:</span> <span class="token string">"testkey"</span>,
  <span class="token string">"value"</span><span class="token builtin class-name">:</span> <span class="token string">"Just testing"</span>,
  <span class="token string">"writeRegion"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span>,
  <span class="token string">"readRegion"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Awesome, we retrieved our key. Note that it says it was last written in the <code class="language-text">us-west-2</code> region and that we’re currently reading from the <code class="language-text">us-west-2</code> region.</p>
<h1>Adding a custom domain</h1>
<p>Now, let’s add a custom domain to our endpoint. This means: (a) we won’t have a funky endpoint like <code class="language-text">6rbm4350zj.execute-api.us-west-2.amazonaws.com</code>; (b) it’ll be easier to geo-route later.</p>
<p>To follow along here, <em>you will need to own a domain registered in Route53</em>.</p>
<p>We’re going to use the <a href="https://github.com/amplify-education/serverless-domain-manager">serverless-domain-manager</a> plugin to simplify this.</p>
<p><strong>Note:</strong> If you want more details on this, read our post on <a href="https://serverless.com/blog/serverless-api-gateway-domain/">setting up your custom domain with Serverless &#x26; API Gateway</a>. This usage will be a little bit different since we’re using a new feature to <a href="https://github.com/amplify-education/serverless-domain-manager/pull/49">set up regional domains</a>.</p>
<p>My base domain is <code class="language-text">serverlessteam.com</code>. I want my app to generally be accessible at <code class="language-text">keyvalues.serverlessteam.com</code>.</p>
<p>First, let’s create an SSL certificate for our domain using Amazon Certificate Manager (ACM). Navigate to Amazon Certificate Manager <em>in the region you want to deploy your endpoint</em>. Click “Request a certificate” and enter your domain.</p>
<p>I’ll create a certificate at <code class="language-text">keyvalue.serverlessteam.com</code>.</p>
<img width="1241" alt="Request an ACM certificate" src="https://user-images.githubusercontent.com/6509926/34584358-1cb4b132-f161-11e7-8ab6-b1f619db3200.png">
<p>Hit ‘Next’, and AWS will send your domain manager an email to confirm the certificate.</p>
<p>While you’re here, you should create one for your other region as well. I created mine in <code class="language-text">eu-central-1</code> (Frankfurt) using the same process.</p>
<p>Next, install the <code class="language-text">serverless-domain-manager</code> plugin using <code class="language-text">npm</code>:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> init -f
$ <span class="token function">npm</span> <span class="token function">install</span> --save-dev serverless-domain-manager</code></pre></div>
<p>Configure your <code class="language-text">serverless.yml</code> by adding the plugin to <code class="language-text">plugins</code> and adding config in the <code class="language-text">custom</code> block:</p>
<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token comment"># serverless.yml</span>
<span class="token key atrule">service</span><span class="token punctuation">:</span> serverless<span class="token punctuation">-</span>keyvalue

<span class="token key atrule">frameworkVersion</span><span class="token punctuation">:</span> <span class="token string">">=1.25.0"</span>

<span class="token key atrule">plugins</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> serverless<span class="token punctuation">-</span>domain<span class="token punctuation">-</span>manager

<span class="token key atrule">custom</span><span class="token punctuation">:</span>
  <span class="token key atrule">tableName</span><span class="token punctuation">:</span> <span class="token string">"keyvalues"</span>
  <span class="token key atrule">customDomain</span><span class="token punctuation">:</span>
    <span class="token key atrule">domainName</span><span class="token punctuation">:</span> keyvalue.serverlessteam.com
    <span class="token key atrule">endpointType</span><span class="token punctuation">:</span> <span class="token string">'regional'</span>
    <span class="token key atrule">certificateRegion</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>opt<span class="token punctuation">:</span>region<span class="token punctuation">}</span>
    <span class="token key atrule">createRoute53Record</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token key atrule">provider</span><span class="token punctuation">:</span>
<span class="token punctuation">...</span>.</code></pre></div>
<p>This will help us provision a custom domain in API Gateway. Note that we’re provisioning a <code class="language-text">regional</code> endpointType, and the domain name will use the region. We won’t have it create our Route53 record as we’ll create that separately.</p>
<p>Go on and create your domain:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ sls create_domain --region us-west-2
Serverless: Skipping creation of Route53 record.
Serverless: <span class="token string">'keyvalue.serverlessteam.com'</span> was created/updated. New domains may take up to <span class="token number">40</span> minutes to be initialized.</code></pre></div>
<p>Because it can take up to 40 minutes to provision a domain, let’s provision our other region while we’re here:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ sls create_domain --region eu-central-1
Serverless: Skipping creation of Route53 record.
Serverless: <span class="token string">'keyvalue.serverlessteam.com'</span> was created/updated. New domains may take up to <span class="token number">40</span> minutes to be initialized.</code></pre></div>
<p>And now, deploy our two services:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ sls deploy --region us-west-2
<span class="token punctuation">..</span>. Deploy output <span class="token punctuation">..</span><span class="token punctuation">..</span>

$ sls deploy --region eu-central-1
<span class="token punctuation">..</span>. Deploy output <span class="token punctuation">..</span>.</code></pre></div>
<p>Both our services are deployed. Let’s set up the Route53 Latency records to our endpoints.</p>
<p><a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy.html#routing-policy-latency">Latency-based routing</a> is a really interesting feature of Route53. It allows you to create multiple DNS records for the same resource. Each DNS record points to IP addresses in different regions. When the user makes a DNS query, Route53 will return the record that offers the lowest latency based on the requesting user’s location. <em>Neat.</em></p>
<p>We’ll create two records for <code class="language-text">keyvalue.&lt;yourdomain&gt;.com</code>—one in us-west-2 and one in eu-central-1. Use the script below, modifying the value of <code class="language-text">DOMAIN</code> in the first line to match your domain:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token assign-left variable">DOMAIN</span><span class="token operator">=</span>serverlessteam.com
<span class="token assign-left variable">SUBDOMAIN</span><span class="token operator">=</span>keyvalue.<span class="token variable">${DOMAIN}</span>
<span class="token assign-left variable">STACKNAME</span><span class="token operator">=</span>serverless-keyvalue-dev
<span class="token assign-left variable">HOSTEDZONE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws route53 list-hosted-zones --query <span class="token string">'HostedZones[?Name==<span class="token variable"><span class="token variable">`</span>'$<span class="token punctuation">{</span>DOMAIN<span class="token punctuation">}</span>'.<span class="token variable">`</span></span>].Id'</span> --output text<span class="token variable">)</span></span>
<span class="token assign-left variable">USDOMAIN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws cloudformation describe-stacks --stack-name $<span class="token punctuation">{</span>STACKNAME<span class="token punctuation">}</span> --region us-west-2 --query <span class="token string">'Stacks[0].Outputs[?OutputKey==<span class="token variable"><span class="token variable">`</span>DomainName<span class="token variable">`</span></span>].OutputValue'</span> --output text<span class="token variable">)</span></span>
<span class="token assign-left variable">EUROPEDOMAIN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>aws cloudformation describe-stacks --stack-name $<span class="token punctuation">{</span>STACKNAME<span class="token punctuation">}</span> --region eu-central-1 --query <span class="token string">'Stacks[0].Outputs[?OutputKey==<span class="token variable"><span class="token variable">`</span>DomainName<span class="token variable">`</span></span>].OutputValue'</span> --output text<span class="token variable">)</span></span>

aws route53 change-resource-record-sets <span class="token punctuation">\</span>
  --hosted-zone-id <span class="token variable">${HOSTEDZONE}</span> <span class="token punctuation">\</span>
  --change-batch  <span class="token string">'{
      "Comment": "optional comment about the changes in this change batch request",
      "Changes": [
        {
          "Action": "UPSERT",
          "ResourceRecordSet": {
            "Name": "'</span><span class="token variable">${SUBDOMAIN}</span><span class="token string">'",
            "Type": "CNAME",
            "TTL": 300,
            "SetIdentifier": "us-west-2",
            "Region": "us-west-2",
            "ResourceRecords": [
              {
                "Value": "'</span><span class="token variable">${USDOMAIN}</span><span class="token string">'"
              }
            ]
          }
        },
        {
          "Action": "UPSERT",
          "ResourceRecordSet": {
            "Name": "'</span><span class="token variable">${SUBDOMAIN}</span><span class="token string">'",
            "Type": "CNAME",
            "TTL": 300,
            "SetIdentifier": "eu-central-1",
            "Region": "eu-central-1",
            "ResourceRecords": [
              {
                "Value": "'</span><span class="token variable">${EUROPEDOMAIN}</span><span class="token string">'"
              }
            ]
          }
        }
      ]
    }'</span></code></pre></div>
<p>After this operation, you’ll have latency records pointing to your regional API Gateways using the same subdomain. Let’s try it out.</p>
<p>Set a key in your US region:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> -X POST <span class="token variable">${USDOMAIN}</span>/testing -d <span class="token string">'{"value": "It worked"}'</span>
<span class="token punctuation">{</span><span class="token string">"key"</span><span class="token builtin class-name">:</span> <span class="token string">"testing"</span>, <span class="token string">"value"</span><span class="token builtin class-name">:</span> <span class="token string">"It worked"</span>, <span class="token string">"region"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span><span class="token punctuation">}</span></code></pre></div>
<p>Then retrieve it:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> -X GET <span class="token variable">${USDOMAIN}</span>/testing
<span class="token punctuation">{</span>
  <span class="token string">"key"</span><span class="token builtin class-name">:</span> <span class="token string">"testing"</span>,
  <span class="token string">"value"</span><span class="token builtin class-name">:</span> <span class="token string">"It worked"</span>,
  <span class="token string">"writeRegion"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span>,
  <span class="token string">"readRegion"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Let’s try retrieving the key from our European region:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> -X GET <span class="token variable">${EUROPEDOMAIN}</span>/testing
<span class="token punctuation">{</span><span class="token string">"error"</span><span class="token builtin class-name">:</span> <span class="token string">"Sorry, an error occurred while retrieving your key."</span><span class="token punctuation">}</span></code></pre></div>
<p>Ah, the key doesn’t show up. This is because our two regions are completely separate from each other. Each has their own Lambda compute and their own DynamoDB data store.</p>
<p>While these separate regions allow for fast queries around the globe, it also results in a segmented experience for users. We want the <em>data</em> to be shared, so a user gets a fast, consistent experience at any point on earth.</p>
<h1>DynamoDB Global Tables</h1>
<p>Enter: DynamoDB Global Tables.</p>
<p>This feature, <a href="https://serverless.com/blog/ultimate-list-serverless-announcements-reinvent/#dynamodb-global-tables">announced at AWS re:Invent 2017</a>, allows you to specify DynamoDB tables in separate regions to act as a single table. Writes in one region will be asynchronously replicated to the other regions.</p>
<p>This allows for some powerful applications without writing custom syncing logic.</p>
<p>To set up a Global Table, there are a few requirements. First, the tables must have the same name in different regions. Second, both tables must be <em>entirely empty</em>. This means we’ll need to clear out any existing items in our table.</p>
<p>If you have Items in your table, use the script below to clean them out. You’ll need to run it for each region that has a table with Items in it:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ aws dynamodb scan --table-name keyvalues --region us-west-2 <span class="token operator">|</span> <span class="token punctuation">\</span>
 jq -c <span class="token string">'.Items[] | { key } '</span> <span class="token operator">|</span>
 <span class="token function">tr</span> <span class="token string">'<span class="token entity" title="\n">\n</span>'</span> <span class="token string">'<span class="token entity" title="\0">\0</span>'</span> <span class="token operator">|</span> <span class="token punctuation">\</span>
 <span class="token function">xargs</span> -0 -n1 -t aws dynamodb delete-item --table-name keyvalues --region us-west-2 --key</code></pre></div>
<p>Once your tables are cleared out, then we can run the command to create a global table using the AWS CLI:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ aws dynamodb create-global-table <span class="token punctuation">\</span>
    --global-table-name keyvalues <span class="token punctuation">\</span>
    --replication-group <span class="token assign-left variable">RegionName</span><span class="token operator">=</span>us-west-2 <span class="token assign-left variable">RegionName</span><span class="token operator">=</span>eu-central-1 <span class="token punctuation">\</span>
    --region us-west-2</code></pre></div>
<p>You will get a response indicating that the table is being created:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token punctuation">{</span>
    <span class="token string">"GlobalTableDescription"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"GlobalTableStatus"</span><span class="token builtin class-name">:</span> <span class="token string">"CREATING"</span>,
        <span class="token string">"GlobalTableName"</span><span class="token builtin class-name">:</span> <span class="token string">"keyvalues"</span>,
        <span class="token string">"ReplicationGroup"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token string">"RegionName"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span>
            <span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>
                <span class="token string">"RegionName"</span><span class="token builtin class-name">:</span> <span class="token string">"eu-central-1"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>,
        <span class="token string">"CreationDateTime"</span><span class="token builtin class-name">:</span> <span class="token number">1516220398.243</span>,
        <span class="token string">"GlobalTableArn"</span><span class="token builtin class-name">:</span> <span class="token string">"arn:aws:dynamodb::488110005556:global-table/keyvalues"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now our tables will be synced together, so writes from one region will be replicated to another region.</p>
<p>Let’s test it out. Save a key in the US region:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> -X POST <span class="token variable">${USDOMAIN}</span>/testing -d <span class="token string">'{"value": "It worked"}'</span>
<span class="token punctuation">{</span><span class="token string">"key"</span><span class="token builtin class-name">:</span> <span class="token string">"testing"</span>, <span class="token string">"value"</span><span class="token builtin class-name">:</span> <span class="token string">"It worked"</span>, <span class="token string">"region"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span><span class="token punctuation">}</span></code></pre></div>
<p>Then retrieve it in the EU region:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> -X GET <span class="token variable">${EUROPEDOMAIN}</span>/testing
<span class="token punctuation">{</span>
  <span class="token string">"key"</span><span class="token builtin class-name">:</span> <span class="token string">"testing"</span>,
  <span class="token string">"value"</span><span class="token builtin class-name">:</span> <span class="token string">"It worked"</span>,
  <span class="token string">"writeRegion"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span>,
  <span class="token string">"readRegion"</span><span class="token builtin class-name">:</span> <span class="token string">"eu-central-1"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Nice, it worked. We can read the key in a different region. Note that the response from the <code class="language-text">getKey</code> method includes the region in which the key was written (<code class="language-text">us-west-2</code>) as well as the region from which we’re currently reading (<code class="language-text">eu-central-1</code>).</p>
<p>We can also use our custom domain to retrieve the key from whichever region is closest:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> -X GET https://keyvalue.serverlessteam.com/testing
<span class="token punctuation">{</span>
  <span class="token string">"key"</span><span class="token builtin class-name">:</span> <span class="token string">"testing"</span>,
  <span class="token string">"value"</span><span class="token builtin class-name">:</span> <span class="token string">"It worked"</span>,
  <span class="token string">"writeRegion"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span>,
  <span class="token string">"readRegion"</span><span class="token builtin class-name">:</span> <span class="token string">"us-west-2"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This read from the <code class="language-text">us-west-2</code> region as I’m located in the US, but it would read from the <code class="language-text">eu-central-1</code> region for those closer to that region.</p>
<h1>Frontend client</h1>
<p>To this point, we’ve been using <code class="language-text">curl</code> and the terminal for calling our API. If you want a more visual approach, <a href="https://twitter.com/alex_casalboni">Alex Casalboni</a> created a <a href="https://github.com/alexcasalboni/serverless-multi-region-client-demo">visual frontend</a> for interacting with the backend. It allows you to write to and read from specific regions, while also showing the latency of your requests:</p>
<img width="1287" alt="Multi-region frontend client" src="https://user-images.githubusercontent.com/6509926/35575278-9921affa-05a1-11e8-901d-b2d3fc788b7b.png">
<p>Check it out and run it yourself!</p>
<h1>Miss the DynamoDB global tables webinar?</h1>
<p>Follow <a href="https://twitter.com/goserverless/">@goserverless</a> on twitter or sign up for our bi-monthly newsletter (via the lefthand menu) to stay on top of serverless industry news.</p></section><hr style="margin-bottom:1.75rem"/><footer><div style="display:flex;margin-bottom:4.375rem"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-right:0.875rem;margin-bottom:0;min-width:50px;border-radius:100%"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAUBAgME/8QAFwEBAAMAAAAAAAAAAAAAAAAAAgABA//aAAwDAQACEAMQAAABtTuWpVlGVPBk0HAFf//EABsQAAICAwEAAAAAAAAAAAAAAAECAxMAESMk/9oACAEBAAEFAnOlgZ7cvIZnEYuxj6ZjxjOh/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQEiH/2gAIAQMBAT8BwqOP/8QAGREAAQUAAAAAAAAAAAAAAAAAAAEQEiEx/9oACAECAQE/AbJCY3//xAAgEAABAgUFAAAAAAAAAAAAAAABABECAxASITFBYYGR/9oACAEBAAY/Ai2qYx3A0tPifYlsLBBT8qX3T//EABoQAQADAQEBAAAAAAAAAAAAAAEAESExQVH/2gAIAQEAAT8hRVcZF9KXnJkRaRWsbCd3oQNMD6x1eoRshVw76T//2gAMAwEAAgADAAAAENvoAP/EABkRAAIDAQAAAAAAAAAAAAAAAAABESExUf/aAAgBAwEBPxCEpsj00xYf/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAEQESExUf/aAAgBAgEBPxBNs0X5A9n/xAAeEAEBAQACAQUAAAAAAAAAAAABEQAhMUFRYXGBkf/aAAgBAQABPxClwdnV0whQo4lO/wAzyyrjkGw+cZbkILxecbfXBH7zSeBntAmta2n5uEBbXZ4N/9k=" alt="Kyle Mathews" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;border-radius:50%"/><noscript><picture><source srcset="/lumen/static/4f27694bd7811d13157e5e488ad64f43/99438/profile-pic.jpg 1x,
/lumen/static/4f27694bd7811d13157e5e488ad64f43/aba1d/profile-pic.jpg 1.5x,
/lumen/static/4f27694bd7811d13157e5e488ad64f43/b315d/profile-pic.jpg 2x" /><img loading="lazy" width="50" height="50" srcset="/lumen/static/4f27694bd7811d13157e5e488ad64f43/99438/profile-pic.jpg 1x,
/lumen/static/4f27694bd7811d13157e5e488ad64f43/aba1d/profile-pic.jpg 1.5x,
/lumen/static/4f27694bd7811d13157e5e488ad64f43/b315d/profile-pic.jpg 2x" src="/lumen/static/4f27694bd7811d13157e5e488ad64f43/99438/profile-pic.jpg" alt="Kyle Mathews" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Written by <strong>Kyle Mathews</strong> <!-- -->who lives and works in San Francisco building useful things.<!-- --> <a href="https://twitter.com/kylemathews">You should follow him on Twitter</a></p></div></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/lumen/posts/2018-01-23-appy-design-thinking-lean-startup-software-development/">← <!-- -->How to apply design thinking to lean startup software development</a></li><li><a rel="next" href="/lumen/posts/2018-01-30-serverless-style-from-fashion-to-tech/">Serverless style - my journey from fashion to tech<!-- --> →</a></li></ul></nav></main><footer>© <!-- -->2020<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/2018-01-30-build-multiregion-multimaster-application-dynamodb-global-tables/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-36e457a5393b79b99515.js"],"component---src-pages-404-js":["/component---src-pages-404-js-9578b926700cf49bb4fc.js"],"component---src-pages-index-js":["/component---src-pages-index-js-753a3f9bde0636fce206.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-f16d60f62c7d2b3e9bcc.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-e4c781a4720974cc2679.js"]};/*]]>*/</script><script src="/lumen/component---src-templates-blog-post-js-e4c781a4720974cc2679.js" async=""></script><script src="/lumen/cd7d5f864fc9e15ed8adef086269b0aeff617554-c8f68cb3ade1320f5257.js" async=""></script><script src="/lumen/commons-4c36ffabef1434ec1126.js" async=""></script><script src="/lumen/app-36e457a5393b79b99515.js" async=""></script><script src="/lumen/styles-cd63080e784be7b7e7cf.js" async=""></script><script src="/lumen/framework-5fc6169171e885c3b522.js" async=""></script><script src="/lumen/webpack-runtime-c76c0c9d42bc9bf56761.js" async=""></script></body></html>