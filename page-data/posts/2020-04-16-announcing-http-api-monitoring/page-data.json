{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2020-04-16-announcing-http-api-monitoring/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"00e99c97-3964-5cb8-9be2-54c51ba5cfc7","excerpt":"Troubleshooting HTTP APIs After we announced support for HTTP APIs in the Serverless Framework we saw a lot of enthusiasm around the benefits of the new HTTP…","html":"<h1>Troubleshooting HTTP APIs</h1>\n<p>After we <a href=\"https://serverless.com/blog/aws-http-api-support/\">announced support</a> for HTTP APIs in the Serverless Framework we saw a lot of enthusiasm around the benefits of the new HTTP APIs. People were excited about the possibility for significant cost reduction and performance improvement. But, there was still the question of effectively troubleshooting your Lambda infrastructure in combination with the new HTTP API.</p>\n<p>Because of this, we’re excited to announce newly released monitoring and debugging support for HTTP APIs. Now you can get automatically instrumented monitoring and debugging tools on top of your HTTP APIs right out of the box. Let’s see how with a simple service.</p>\n<h1>Setting up Troubleshooting</h1>\n<p>First, make sure you’ve already done a few things:</p>\n<ul>\n<li>Installed the Serverless Framework <code class=\"language-text\">npm install -g serverless</code></li>\n<li>Created a free <a href=\"https://dashboard.serverless.com/\">Framework Pro</a> account</li>\n</ul>\n<p>After this, you should be able to create an HTTP API pretty easily.</p>\n<p>First, let’s create a new project directory and create a <code class=\"language-text\">serverless.yml</code> file in it:</p>\n<ul>\n<li><code class=\"language-text\">mkdir http-api-project</code></li>\n<li><code class=\"language-text\">cd http-api-project</code></li>\n<li><code class=\"language-text\">touch serverless.yml</code></li>\n</ul>\n<p>Then, add this to your <code class=\"language-text\">serverless.yml</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">org</span><span class=\"token punctuation\">:</span> yourorg\n<span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">-</span>api<span class=\"token punctuation\">-</span>example\n<span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">-</span>api<span class=\"token punctuation\">-</span>example<span class=\"token punctuation\">-</span>python\n\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> python3.8\n  \n<span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">getProfileInfo</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.hello\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">httpApi</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">method</span><span class=\"token punctuation\">:</span> GET\n            <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /hello</code></pre></div>\n<p>Make sure to replace the <code class=\"language-text\">org</code> and <code class=\"language-text\">app</code> values with the ones for your Framework Pro account. From there, you can create a new <code class=\"language-text\">handler.py</code> file:</p>\n<ul>\n<li><code class=\"language-text\">touch handler.py</code></li>\n</ul>\n<p>And then add this Python code inside the file:</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> json\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    body <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span>\n    response <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"statusCode\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"body\"</span><span class=\"token punctuation\">:</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Hello friends!\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> response</code></pre></div>\n<p>After you make sure to save both <code class=\"language-text\">serverless.yml</code> and <code class=\"language-text\">handler.py</code> you can run <code class=\"language-text\">serverless deploy</code> to deploy your HTTP API.</p>\n<p>From here, just open up the URL in a browser and refresh the page a few times. The URL should look something like this: <code class=\"language-text\">https://44whsmxq8l.execute-api.us-east-1.amazonaws.com/hello</code></p>\n<p>When you load it up in the browser you should see this:</p>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/2020-04-http-api-monitoring/hello-friends.png\" alt=\"Text saying hello friends, in a web browser\"></p>\n<p>After you refresh the page a few times, open up your <a href=\"http://dashboard.serverless.com/\">Framework Pro Dashboard</a> and navigate to your app and service. You should now see the recent logs:</p>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/2020-04-http-api-monitoring/hello-explorer.png\" alt=\"The Framework Pro Overview section\"></p>\n<p>And that’s it! You’ve just setup your HTTP API with monitoring and alerting capabilities.</p>\n<h1>What Next?</h1>\n<p>Now that you know how to setup a basic HTTP API with monitoring you’re ready to continue developing your HTTP APIs. As you dive into it, you might be interested in some of our other guides on HTTP APIs:</p>\n<ul>\n<li>Our <a href=\"https://serverless.com/blog/official-guide-aws-http-apis/\">Official Guide to AWS HTTP APIs</a> covers important essentials and context around the newer HTTP APIs</li>\n<li><a href=\"https://serverless.com/blog/serverless-auth-with-aws-http-apis/\">Serverless Auth with HTTP APIs</a> is an introductory tutorial to getting started with HTTP API authorizers</li>\n<li>Also check out <a href=\"https://github.com/fernando-mc/http-api-surveys-service\">this example</a> of a more complex multi-entity “Surveys service” using DynamoDB and Python</li>\n<li>Or, if you prefer Node, <a href=\"https://github.com/fernando-mc/http-api-surveys-service-node\">this example</a> of the same multi-entity “Surveys service” using DynamoDB and Node.js</li>\n</ul>","frontmatter":{"title":"Announcing HTTP API Troubleshooting","date":"April 21, 2020","description":"Framework Pro now supports automatic troubleshooting of HTTP APIs!"}}},"pageContext":{"slug":"/posts/2020-04-16-announcing-http-api-monitoring/","previous":{"fields":{"slug":"/posts/2020-04-02-serverless-components-ga/"},"frontmatter":{"title":"Announcing Serverless Components GA"}},"next":{"fields":{"slug":"/posts/2020-05-26-serverless-express-apis-aws-lambda-http-api/"},"frontmatter":{"title":"Serverless Express – Easy APIs On AWS Lambda & AWS HTTP API"}}}}}