{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2017-09-06-running-multi-cloud-functions-at-spot-instance-prices/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"a8d084b7-dcb3-527e-9083-231db9dc6e21","excerpt":"Weâ€™ve seen it time and time again: companies get tremendous cost savings when they port over into the serverless realm. Some real world examples: How I cut myâ€¦","html":"<p>Weâ€™ve seen it time and time again: companies get tremendous cost savings when they port over into the serverless realm.</p>\n<p><strong>Some real world examples:</strong></p>\n<ul>\n<li><a href=\"https://medium.freecodecamp.org/how-i-cut-my-aws-bill-by-90-35c937596f0c\" target=\"_blank\">How I cut my AWS bill by 90% by going serverless</a></li>\n<li><a href=\"https://www.infoq.com/news/2016/08/serverless-autodesk\" target=\"_blank\">Costs a small fraction (~1%) of the traditional cloud approach</a></li>\n<li><a href=\"https://medium.com/@PaulDJohnston/aws-lambda-9-million-api-calls-for-1-1134243c55d7\" target=\"_blank\">AWS Lambda: 9 million API calls for $1</a></li>\n</ul>\n<p>What if I told youâ€¦it just got even cheaper?  </p>\n<h2>Serverless &#x26; Spotinst team up</h2>\n<p>Introducing the latest serverless provider integration, <a href=\"https://spotinst.com/products/spotinst-functions/\">Spotinst</a>.</p>\n<img align=\"right\" width=\"300\" src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/sls-and-spotinst.png\">\n<p><a href=\"https://spotinst.com/products/spotinst-functions/\">Spotinst Functions</a> enables users to deploy multi-cloud functions at Spot Prices. By leveraging spot instances, you could <strong>save 50 to 80%</strong> over standard serverless FaaS pricing.</p>\n<h3>Spotinst supported runtimes</h3>\n<p>Spotinst currently supports Node (4, 6, &#x26; 8.3), Java, Python, Ruby, Go as function runtimes.</p>\n<h3>Cross-cloud deployments</h3>\n<p>Spotinst functions can be deployed simultaneously in AWS, Azure and Google Cloud Platform.</p>\n<p>This ability to deploy across clouds improves SLA and offers higher function availability. If one cloud provider goes down (or pricing is cheaper elsewhere), Spotinst handles this for you under the hood.</p>\n<img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/multi-cloud-multi-region-functions.jpg\">\n<h3>Edge location support</h3>\n<p>Reduce data transfer costs with edge location support. Unlike other edge FaaS solutions, Spotinst Functions doesnâ€™t have limitations on external api calls or execution time limits.</p>\n<p>They are currently supporting 15 different locations around the US and 10+ locations in APAC, SEA &#x26; Europe.</p>\n<h3>Function Analytics</h3>\n<ul>\n<li>Invocation count &#x26; latency metrics, errors &#x26; HTTP response codes analytics</li>\n<li>Geo Location analytics</li>\n<li>Easy log debugging</li>\n</ul>\n<h3>Pricing Example (Compute Only):</h3>\n<p>Lets see how pricing stacks up with an example.</p>\n<p>With 500,000 Requests per Minute (21,600,000,000 Monthly) with 256MB of RAM &#x26; &#x3C;10ms execution time, the prices would break down like so:</p>\n<ul>\n<li>Google Functions: <strong>~$10,000 compute time</strong></li>\n<li>Amazon Lambda: <strong>~$9,000  compute time</strong></li>\n<li>Microsoft Azure: <strong>~$8,500</strong></li>\n<li>IBM Bluemix (Open Whisk): <strong>~$9,000</strong></li>\n<li>Spotinst Functions: <strong>~$2,000 (!)</strong></li>\n</ul>\n<h2>Demo</h2>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe src=\"https://www.youtube.com/embed/SZm7SlT3EIQ\" frameborder=\"0\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>\n<h2>Getting started</h2>\n<p>Hereâ€™s what you need to get started with the Spotinst plug-in now:</p>\n<p><a href=\"/lumen/framework/docs/providers/spotinst/guide/quick-start/\">Start here</a> in our docs.</p>\n<ul>\n<li><a href=\"https://github.com/spotinst/serverless-spotinst-functions\">GitHub repo</a></li>\n<li><a href=\"https://serverless.com/framework/docs/providers/spotinst/\">Spotinst Docs</a></li>\n<li><a href=\"https://spotinst.com/products/spotinst-functions/\">Spotinst Functions Homepage</a></li>\n<li>Ping us on <a href=\"https://twitter.com/goserverless\">@goserverless</a> or <a href=\"https://twitter.com/spotinst\">@spotinst</a></li>\n</ul>\n<p>Or continue reading for step by step instructions on how to set up and deploy your first service on Spotinst.</p>\n<p>Pre-requisites: Make sure you have the latest version of serverless installed on your machine.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install serverless in your command line</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> serverless -g</code></pre></div>\n<h3>1. Sign up for Spotinst Account</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/1._Sign_up_for_SpotInst_Account.jpg\" title=\"1._Sign_up_for_SpotInst_Account.jpg\"></p>\n<p>You can <a href=\"https://console.spotinst.com/#/auth/signUp\">sign up for a Spotinst account here</a></p>\n<h3>2. Head into the functions console</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/2._Head_into_the_functions_console.jpg\" title=\"2._Head_into_the_functions_console.jpg\"></p>\n<p>Inside of Spotinst, head into the <a href=\"https://console.spotinst.com/functions\">Functions console</a>.</p>\n<p><a href=\"https://console.spotinst.com/functions\">https://console.spotinst.com/functions</a></p>\n<h3>3. Create a new Spotinst application</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/3._Create_a_new_SpotInst_application.jpg\" title=\"3._Create_a_new_SpotInst_application.jpg\"></p>\n<p>Create a new app and give it a name.</p>\n<p>An <code class=\"language-text\">application</code> in Spotinst is a logical group of several environments. Most commonly, it stores environments that share the same business application (e.g., testing and production of a specific function). More on Spotinst applications <a href=\"https://help.spotinst.com/hc/en-us/articles/115004156989-Application\">in the Spotinst docs</a></p>\n<h3>4. Create a new environment in the Spotinst application</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/4._Create_a_new_environment_in_the_SpotInst_application.jpg\" title=\"4._Create_a_new_environment_in_the_SpotInst_application.jpg\"></p>\n<p>Name the Environment and choose which regions and providers you want to run the function in.</p>\n<p>This is where you can choose to run your function across cloud providers and within multiple regions. ðŸŽ‰</p>\n<p>Inside Spotinst, the <code class=\"language-text\">environment</code> refers to a configuration group that contains actual Functions. <a href=\"https://help.spotinst.com/hc/en-us/articles/115004157229-Environment\">Learn more in the spotinst docs</a></p>\n<h3>5a. Grab an API token in Spotinst settings</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/5a._Grab_an_API_token_in_Spotinst_settings.jpg\" title=\"5a._Grab_an_API_token_in_Spotinst_settings.jpg\"></p>\n<p>Now head into spotinst setting. We need to grab an API key!</p>\n<h3>5b. Generate Spotinst API token</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/5b._Generate_Spotinst_API_token.jpg\" title=\"5b._Generate_Spotinst_API_token.jpg\"></p>\n<p>Click on API in settings and then on Generate Token. <a href=\"https://console.spotinst.com/#/settings/tokens/permanent\">Generate SpotInst API tokens here</a></p>\n<h3>5c. Name your API token</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/5c._Name_your_API_token.jpg\" title=\"5c._Name_your_API_token.jpg\"></p>\n<p>Name your token and click generate.</p>\n<p><a href=\"https://console.spotinst.com/#/settings/tokens/permanent\">https://console.spotinst.com/#/settings/tokens/permanent</a></p>\n<h3>5d.Copy Token for <code class=\"language-text\">sls credentials</code></h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/5d.Copy_Token_for__sls_credentials_.jpg\" title=\"5d.Copy_Token_for__sls_credentials_.jpg\"></p>\n<p>Now copy the token, we will need to use it with the <code class=\"language-text\">sls config credentials</code> command in our terminal.</p>\n<p><a href=\"https://console.spotinst.com/#/settings/tokens/permanent\">https://console.spotinst.com/#/settings/tokens/permanent</a></p>\n<h3>6. Grab Account Id</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/6._Grab_Account_Id.jpg\" title=\"6._Grab_Account_Id.jpg\"></p>\n<p>We also need your Spotinst account ID. You can grab that here: <a href=\"https://console.spotinst.com/#/settings/account/general\">https://console.spotinst.com/#/settings/account/general</a></p>\n<h3>7. Use <code class=\"language-text\">sls create</code> and create a Spotinst service</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/7._Use__sls_create__and_create_a_Spotinst_service.jpg\" title=\"7._Use__sls_create__and_create_a_Spotinst_service.jpg\"></p>\n<p>Back in your terminal, create a new Spotinst service.</p>\n<h3>8. Configure your Spotinst credentials on your machine</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/8._Configure_your_Spotinst_credentials_on_your_machine.jpg\" title=\"8._Configure_your_Spotinst_credentials_on_your_machine.jpg\"></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">sls config credentials -p spotinst -t hhhhhhhh -a act-73192739</code></pre></div>\n<h3>9a. Grab environment ID from Spotinst UI</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/9a._Grab_environment_ID_from_Spotinst_UI.jpg\" title=\"9a._Grab_environment_ID_from_Spotinst_UI.jpg\"></p>\n<p>You will need your spotInst environment ID from the UI to deploy your functions.</p>\n<p><a href=\"https://console.spotinst.com/functions/explorer/\">Grab the environment ID</a> and drop it in the serverless.yml of the service.</p>\n<h3>9b. Add your SpotInst environment key to serverless.yml</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/9b._Add_your_SpotInst_environment_key_to_serverless.yml.jpg\" title=\"9b._Add_your_SpotInst_environment_key_to_serverless.yml.jpg\"></p>\n<h3>10. Deploy your functions</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/10._Deploy_your_functions.jpg\" title=\"10._Deploy_your_functions.jpg\"></p>\n<p>Run <code class=\"language-text\">serverless deploy</code></p>\n<p>The serverless framework will read your config from <code class=\"language-text\">serverless.yml</code>, package up the function and deploy the code to your Spotinst function environment</p>\n<h3>11. Get info about service</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/11._Get_info_about_service.jpg\" title=\"11._Get_info_about_service.jpg\"></p>\n<p>Run <code class=\"language-text\">sls info</code> for information and live endpoints of your service.</p>\n<h3>You can view your functions in UI</h3>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/spotinst-post/You_can_view_your_functions_in_UI.jpg\" title=\"You_can_view_your_functions_in_UI.jpg\"></p>\n<p>or via the <code class=\"language-text\">sls info</code> command in your terminal.</p>\n<h2>Multi-Cloud &#x26; Multi-region functions</h2>\n<p>ðŸŽ‰ Congrats you are now leveraging spot instance prices and running your functions across multiple clouds.</p>\n<p>If you have questions or comments about the integration, weâ€™d love to hear from you in the comments below or over on the <a href=\"https://forum.serverless.com/\">serverless forums</a>.</p>","frontmatter":{"title":"Run Serverless Functions at half the cost with Spotinst & Serverless Framework","date":"September 06, 2017","description":"Using the Spotinst provider integration for serverless you can run multi-region, cross-cloud functions at 50-80% the cost"}}},"pageContext":{"slug":"/posts/2017-09-06-running-multi-cloud-functions-at-spot-instance-prices/","previous":{"fields":{"slug":"/posts/2017-08-31-serverless-v1.21.0/"},"frontmatter":{"title":"Serverless v1.21 - Kubeless provider support, AWS credentials management and invoke improvements added"}},"next":{"fields":{"slug":"/posts/2017-09-07-scaling-the-resistance-zero-maintenance-donations-platform/"},"frontmatter":{"title":"Scaling the Resistance - a Zero-maintenance Donations Platform with Serverless and AWS"}}}}}