{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2017-08-30-serverless-and-kubernetes-via-kubeless/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"0c91e56c-e15c-5bf2-8e8f-307b06360a6f","excerpt":"One of the primary goals of the serverless framework is to provide a platform-agnostic cloud experience for developers. We want it to be easy for people toâ€¦","html":"<p>One of the primary goals of the serverless framework is to provide a <strong>platform-agnostic cloud experience</strong> for developers.</p>\n<p>We want it to be easy for people to write code once and have the freedom to choose where that code runs.</p>\n<p>That is why we are super excited to announce a brand new serverless provider <a href=\"http://kubeless.io/\">Kubeless</a> to expand where your functions can run.</p>\n<h2>Introducing Kubeless</h2>\n<a href=\"http://kubeless.io/\" target=\"_blank\">\n  <img width=\"360\" src=\"https://s3-us-west-2.amazonaws.com/assets.site.serverless.com/blog/kubeless.png\">\n</a>\n<p>Made by the the fine folks over at <a href=\"https://bitnami.com/\">Bitnami</a>, <strong><a href=\"http://kubeless.io/\">Kubeless</a></strong> is a Kubernetes-native way to deploy and manage your serverless functions via the serverless framework.</p>\n<p><a href=\"https://github.com/kubeless/kubeless\">Kubeless</a> lets you deploy small bits of code without having to worry about the underlying infrastructure. It leverages Kubernetes resources to provide auto-scaling, API routing, monitoring, troubleshooting and more.</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe src=\"https://www.youtube.com/embed/ROA7Ig7tD5s\" frameborder=\"0\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>\n<p><a href=\"https://serverless.com/framework/docs/providers/kubeless/\">Checkout the Kubeless Docs</a></p>\n<p>This integrations brings <strong>functions</strong> and <strong>events</strong> into your Kubernetes cluster.</p>\n<p><strong>functions</strong> and <strong>events</strong> are logically grouped together in <strong>services</strong>.</p>\n<p>Letâ€™s explore those two main concepts and how they pertain to Kubeless.</p>\n<h3>ðŸ”„ Functions</h3>\n<p>A Function is an independent unit of deployment, like a microservice. Itâ€™s merely code, deployed in the cloud, that is most often written to perform a single job such as:</p>\n<ul>\n<li>Saving a user to the database</li>\n<li>Processing a file in a database</li>\n<li>Performing a scheduled task (To be added in newer versions)</li>\n</ul>\n<p>The framework is designed to help you easily develop and deploy <strong>Functions</strong> into your Kubernetes cluster.</p>\n<h3>âš¡ Events</h3>\n<p>Anything that triggers a Kubeless Function to execute is regarded by the Framework as an <strong>Event</strong>.</p>\n<p>Here are some examples of events:</p>\n<ul>\n<li>An API Gateway HTTP endpoint (e.g., for a REST API)</li>\n<li>A Kafka queue message (e.g., a message)</li>\n<li>A scheduled timer (e.g., run every 5 minutes) (To be added in newer versions)</li>\n</ul>\n<p><a href=\"https://serverless.com/framework/docs/providers/kubeless/events/\">See list of supported events</a></p>\n<h3>ðŸ“¡ Services</h3>\n<p>Functions and events are grouped together in services and configured with a <code class=\"language-text\">serverless.yml</code> file.</p>\n<p><code class=\"language-text\">serverless.yml</code> is where you define your Functions and the Events that trigger them. Continue reading for an example at the end of this post.</p>\n<p><strong>Note:</strong> serverless services are not to be confused with <a href=\"https://kubernetes.io/docs/concepts/services-networking/service/\">Kubernetes services</a></p>\n<br/>\n<h2>Serverless + Kubeless for on-prem functions</h2>\n<p>Not a day goes by without a user of the framework shooting us an email asking about on-prem support.</p>\n<p>Itâ€™s a widely requested feature and Kubeless delivers on-premise to the enterprise.</p>\n<p>We are very excited to see what people start building with it.</p>\n<br/>\n<h2>Getting Started with Serverless &#x26; Kubeless</h2>\n<p>Make sure you have the serverless framework installed on your machine.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install serverless framework if you haven't already</span>\n<span class=\"token function\">npm</span> i serverless -g</code></pre></div>\n<p>Then create a new service with the <code class=\"language-text\">sls create</code> command.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Create a new Serverless Service/Project</span>\n$ serverless create --template kubeless-python --path new-project\n<span class=\"token comment\"># Change into the newly created directory</span>\n$ <span class=\"token builtin class-name\">cd</span> new-project\n<span class=\"token comment\"># Install npm dependencies</span>\n$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre></div>\n<p>Kubeless runs on Kubernetes, therefor you need a working Kubernetes cluster in order to run it.</p>\n<p>See the guide on <a href=\"/lumen/framework/docs/providers/kubeless/guide/installation/\">installing Kubeless in your Kubernetes cluster</a> to finish setup.</p>\n<h3>Project Structure</h3>\n<p>Below is a quick overview of the <code class=\"language-text\">kubeless-python</code> template for an example hello world python service running on Kubeless. For an in-depth overview of kubeless, see the <a href=\"/lumen/framework/docs/providers/kubeless/\">provider docs</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">|</span>- handler.py <span class=\"token comment\"># function code</span>\n<span class=\"token operator\">|</span>- package.json <span class=\"token comment\"># function deps</span>\n<span class=\"token operator\">|</span>- serverless.yml <span class=\"token comment\"># service configuration</span></code></pre></div>\n<p>The <code class=\"language-text\">serverless.yml</code> defines what functions will be deployed and what events they respond to.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># The service name</span>\n<span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> hello<span class=\"token punctuation\">-</span>world\n\n<span class=\"token comment\"># Where the service lives</span>\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kubeless\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> python2.7\n\n<span class=\"token comment\"># Adding kubeless provider functionality</span>\n<span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> serverless<span class=\"token punctuation\">-</span>kubeless\n\n<span class=\"token comment\"># Functions to be packaged and deployed</span>\n<span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">hello</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.hello</code></pre></div>\n<p>The simple python code returns a simple JSON response.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> json\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    body <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"message\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Go Serverless v1.0! Your function executed successfully!\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"input\"</span><span class=\"token punctuation\">:</span> request<span class=\"token punctuation\">.</span>json\n    <span class=\"token punctuation\">}</span>\n\n    response <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"statusCode\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"body\"</span><span class=\"token punctuation\">:</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> response</code></pre></div>\n<h3>Deployment</h3>\n<p>After hooking up kubeless to your Kubernetes cluster you can deploy your functions with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless deploy -v</code></pre></div>\n<p>The Serverless Framework translates all syntax in serverless.yml to the Function object API calls to provision your Functions and Events.</p>\n<p>For each function in your serverless.yml file, Kubeless will create an Kubernetes Function object and for each HTTP event, it will create a <a href=\"https://kubernetes.io/docs/concepts/services-networking/service/\">Kubernetes service</a>.</p>\n<h2>Links and Resources</h2>\n<p>Hereâ€™s what you need to get started with the Kubeless plug-in now:</p>\n<p><a href=\"/lumen/framework/docs/providers/kubeless/guide/quick-start/\">Start here</a> in our docs.</p>\n<ul>\n<li><a href=\"https://github.com/kubeless/kubeless\">GitHub repo</a></li>\n<li><a href=\"https://github.com/kubeless/kubeless/tree/master/examples\">Kubeless Example</a></li>\n<li><a href=\"https://serverless.com/framework/docs/providers/kubeless/\">Kubeless Docs</a></li>\n<li><a href=\"http://kubeless.io/\">Kubeless Homepage</a></li>\n</ul>\n<p>If you have questions or comments about the integration, weâ€™d love to hear from you in the comments below or over on the <a href=\"https://forum.serverless.com/\">serverless forums</a>.</p>","frontmatter":{"title":"Kubeless brings functions as a service to Kubernetes & on-prem","date":"August 30, 2017","description":"Kubeless is a Kubernetes-native way to deploy and manage your serverless functions via the serverless framework"}}},"pageContext":{"slug":"/posts/2017-08-30-serverless-and-kubernetes-via-kubeless/","previous":{"fields":{"slug":"/posts/2017-08-25-key-takeaways-for-the-future-of-serverless-emit-2017/"},"frontmatter":{"title":"Key takeaways for the future of serverless - Emit 2017 recap"}},"next":{"fields":{"slug":"/posts/2017-08-31-serverless-v1.21.0/"},"frontmatter":{"title":"Serverless v1.21 - Kubeless provider support, AWS credentials management and invoke improvements added"}}}}}