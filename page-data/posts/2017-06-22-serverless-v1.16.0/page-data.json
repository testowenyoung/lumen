{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2017-06-22-serverless-v1.16.0/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"c257c9d6-39e4-50ac-9516-94df5391abcc","excerpt":"We’re proud to announce the v1.16 release of the Serverless Framework! This release introduces new features, improvements, and bugfixes. Let’s take a look at…","html":"<img align=\"right\" src=\"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/framework-v116.png\" width=\"210px\">\n<p>We’re proud to announce the v1.16 release of the Serverless Framework!</p>\n<p>This release introduces new features, improvements, and bugfixes. Let’s take a look at all the new features v1.16 offers.</p>\n<h2>Highlights of 1.16.0</h2>\n<p>You can find a complete list of all the updates in the <a href=\"https://github.com/serverless/serverless/blob/master/CHANGELOG.md\">CHANGELOG.md</a> file or watch the video below.</p>\n<p>Kudos to Ryan H. Lewis (<a href=\"https://twitter.com/ryanmurakami\">@ryanmurakami</a>) for taking the time to record this video!</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe src=\"https://www.youtube.com/embed/_F4YO6pi1sg\" frameborder=\"0\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>\n<h3>S3 server-side encryption options</h3>\n<p>Serverless uploads and stores different revisions of your deployment artifacts including the services <code class=\"language-text\">.zip</code> files and the CloudFormation templates in a dedicated S3 bucket.</p>\n<p>The Serverless Framework creates and manages this deployment bucket by default.</p>\n<p>However you can also use the <code class=\"language-text\">deploymentBucket</code> configuration parameter which is nested in the <code class=\"language-text\">provider</code> property to specify a predefined S3 bucket which should be used when uploading and storing your deployment artifacts.</p>\n<p>With v1.16, we’re adding support for server-side encryption options for such buckets which ensures that your artifacts are encrypted in your bucket once uploaded.</p>\n<p>Let’s take a look at how you could use this feature.</p>\n<p>The first thing we need to do is to create our new S3 bucket which should be used to store our deployment artifacts.</p>\n<p>We assume that this bucket is called <code class=\"language-text\">serverless.deployment.bucket</code>. For example, this bucket could have the following “bucket policy” to ensure that the content is encrypted:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"Version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2012-10-17\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"Statement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"Sid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"RequiredEncryptedPutObject\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"Effect\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Deny\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"Principal\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"*\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"s3:PutObject\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arn:aws:s3:::serverless.deployment.bucket/*\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"Condition\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"StringNotEquals\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"s3:x-amz-server-side-encryption\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"AES256\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"aws:kms\"</span>\n          <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Next, we simply define that we want to use this bucket in combination with a <code class=\"language-text\">AES256</code> server-side encryption for our deployments in our <code class=\"language-text\">serverless.yml</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> service\n\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> nodejs6.10\n  <span class=\"token key atrule\">deploymentBucket</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> serverless.deployment.bucket\n    <span class=\"token key atrule\">serverSideEncryption</span><span class=\"token punctuation\">:</span> AES256\n\n<span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">hello</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.hello</code></pre></div>\n<p>That’s it. All files which will be uploaded to this bucket will be encrypted from now on.</p>\n<p>You can read more in our <a href=\"https://serverless.com/framework/docs/providers/aws/guide/deploying/\">deploying to AWS</a> docs about this feature.</p>\n<h3>API Gateway usage plans support</h3>\n<p>API keys are a widely used feature to enable/disable access to different endpoints of your API offering.</p>\n<p>The <a href=\"https://aws.amazon.com/de/blogs/aws/new-usage-plans-for-amazon-api-gateway/\">introduction of “API Gateway Usage Plans”</a> makes it possible to control the usage patterns your API should support in a fine-grained way.</p>\n<p>A recent AWS update finally added support for this feature in CloudFormation which makes it possible to automate the setup process. Serverless v1.16 takes advantage of this addition and adds native <code class=\"language-text\">serverless.yml</code> support for usage plan definitions.</p>\n<p>The following is a sample <code class=\"language-text\">serverless.yml</code> file which showcases how you can use the new usage plan feature:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> service\n\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> nodejs6.10\n  <span class=\"token key atrule\">apiKeys</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> myAPIKey\n  <span class=\"token key atrule\">usagePlan</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">quota</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">limit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span>\n      <span class=\"token key atrule\">offset</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n      <span class=\"token key atrule\">period</span><span class=\"token punctuation\">:</span> MONTH\n    <span class=\"token key atrule\">throttle</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">burstLimit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span>\n      <span class=\"token key atrule\">rateLimit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span>\n\n<span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">greeter</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.greeter\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">method</span><span class=\"token punctuation\">:</span> POST\n          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> greet\n          <span class=\"token key atrule\">private</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p><strong>Note:</strong> Please make sure to enable usage plan support in your <a href=\"https://console.aws.amazon.com/apigateway/home\">AWS API Gateway console</a> by following the steps in the <a href=\"https://aws.amazon.com/de/blogs/aws/new-usage-plans-for-amazon-api-gateway/\">announcement blog post</a>.</p>\n<h3>Significantly reduced time to deploy by excluding development dependencies</h3>\n<p>The Serverless Framework’s <code class=\"language-text\">package</code> plugin includes a sophisticated zipping utility which gives you control over the <code class=\"language-text\">.zip</code> file creation process through config parameters such as <code class=\"language-text\">exclude</code> or <code class=\"language-text\">include</code>.</p>\n<p>Most of the time the functions you work on rely on different 3rd party packages whether they’re production relevant packages or packages used to streamline the development process (e.g. test runners, offline utilities, etc.).</p>\n<p>In recent versions, Serverless included all your Node.js dependencies by default. This means that your production dependencies as well as your development dependencies are included in the final <code class=\"language-text\">.zip</code> artifact and uploaded to your deployment bucket. </p>\n<p>Such deployment artifacts can easily get quite large in size.</p>\n<p>Serverless v1.16 changes this behavior and introduces a step which analyzes your dependencies while excluding development dependencies from the final <code class=\"language-text\">.zip</code> deployment artifact.</p>\n<p>This feature is currently supported for <code class=\"language-text\">Node.js</code> runtimes and is enabled by default.</p>\n<p>Do you have ideas on how we can add support for other runtimes as well? Please let us know by opening up a <a href=\"https://github.com/serverless/serverless/issues/new\">new issue</a>!</p>\n<p><strong>Note:</strong> Serverless analyzes and excludes development dependencies from all your <code class=\"language-text\">package.json</code> files, no matter how many <code class=\"language-text\">package.json</code> files you have or how nested your directory structure is.</p>\n<h3>Enhancements &#x26; Bug Fixes</h3>\n<p>This release also includes lots of bug fixes and several other enhancements.</p>\n<blockquote>\n<p>Thank you very much for reporting bugs and opening issues!</p>\n</blockquote>\n<h3>Contributors</h3>\n<p>This release contains lots of hard work from our awesome community, and wouldn’t have been possible without passionate people who decided to spend their time contributing to make Serverless better.</p>\n<p>Thank You to all of the contributors who submitted changes for this release:</p>\n<ul>\n<li>Alex Casalboni</li>\n<li>David Gatti</li>\n<li>Eetu Tuomala</li>\n<li>Frank Schmid</li>\n<li>Geoffrey Wiseman</li>\n<li>Jeremy Benoist</li>\n<li>Joey van Dijk</li>\n<li>Juha Syrjälä</li>\n<li>Maciej Sobala</li>\n<li>Matt Hernandez</li>\n<li>Max Redmond</li>\n<li>Ryan Lewis</li>\n<li>Sequoia McDowell</li>\n<li>Vlad Holubiev</li>\n<li>zined</li>\n</ul>\n<h3>Get Involved</h3>\n<p>Serverless has a really helpful, vibrant and awesome community. Want to help us build the best Serverless tooling out there?</p>\n<p>Contributing isn’t just about code! Chime in on <a href=\"https://github.com/serverless/serverless/labels/stage%2Fneeds-feedback\">discussions</a>, help with <a href=\"https://github.com/serverless/serverless/labels/kind%2Fdocs\">documentation updates</a> or <a href=\"https://github.com/serverless/serverless/pulls\">review Pull Requests</a>.</p>\n<p>Just filter by <a href=\"https://github.com/serverless/serverless/labels\">our labels</a> such as <a href=\"https://github.com/serverless/serverless/issues?q=is%3Aopen+is%3Aissue+label%3Astatus%2Feasy-pick\">easy-pick</a>, <a href=\"https://github.com/serverless/serverless/issues?q=is%3Aopen+is%3Aissue+label%3Astatus%2Fhelp-wanted\">help-wanted</a> or <a href=\"https://github.com/serverless/serverless/labels/stage%2Fneeds-feedback\">needs-feedback</a> to find areas where you can help us!</p>\n<p>Furthermore, we’re always seeking feedback from our community to build the features in the best way possible. <a href=\"https://github.com/serverless/serverless/labels/stage%2Fneeds-feedback\">Here’s a list</a> with issues where we need your feedback and insights in your real world usage of Serverless.</p>\n<h3>Next Steps</h3>\n<p>We’ve already started filling in the next <a href=\"https://github.com/serverless/serverless/milestones\">milestones</a>. Check out the <a href=\"https://github.com/serverless/serverless/milestone/32\">1.17 milestone</a> to see what we have planned for the next release.</p>\n<p>We hope that you like the new release! Let us know if you have any questions or feedback in <a href=\"http://forum.serverless.com/\">our Forum</a> or <a href=\"https://github.com/serverless/serverless/issues\">GitHub Issues</a>.</p>\n<h2>Serverless Examples</h2>\n<p>The <a href=\"https://github.com/serverless/examples\">Serverless Examples Repository</a> is an excellent resource if you want to explore some real world examples and learn more about what Serverless architectures look like.</p>\n<h2>Serverless Plugins</h2>\n<p>Serverless provides a completely customizable and pluggable codebase. Our community has written a vast amount of awesome plugins you can install and therefore enhance the capabilities of the Framework.</p>\n<p>A list with all the different plugins can be found at our <a href=\"https://github.com/serverless/plugins\">Serverless Plugins Repository</a>.</p>\n<p>Don’t hestitate to open up a PR over there if you’ve authored or found a new Serverless plugin!</p>","frontmatter":{"title":"Serverless v1.16 - S3 server-side encryption and default exclusion of Node.js dev dependencies added","date":"June 22, 2017","description":"S3 server-side encryption, support for API Gateway usage plans, default exclusion of Node.js dev dependencies and more in the Serverless Framework v1.16 release."}}},"pageContext":{"slug":"/posts/2017-06-22-serverless-v1.16.0/","previous":{"fields":{"slug":"/posts/2017-06-21-event-driven-architecture-dynamodb/"},"frontmatter":{"title":"Event-driven processing with Serverless and DynamoDB streams"}},"next":{"fields":{"slug":"/posts/2017-06-23-serverless-cron-icle-3/"},"frontmatter":{"title":"Serverless (Cron)icle #3 - News from the Serverless Community"}}}}}