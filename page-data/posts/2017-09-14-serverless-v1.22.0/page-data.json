{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2017-09-14-serverless-v1.22.0/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"036cbdb4-7e7f-594d-8434-230c1f3f39bf","excerpt":"Today we’re proud to announce Serverless Framework v1.22. This release is another one which is packed with a lot of great features and enhancements! Let’s take…","html":"<img align=\"right\" src=\"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/serverless-framework-v1.22.png\" width=\"130px\">\n<p>Today we’re proud to announce Serverless Framework v1.22.</p>\n<p>This release is another one which is packed with a lot of great features and enhancements! Let’s take a closer look at all\nthe changes v1.22 introduces.</p>\n<h2>Whats new</h2>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe src=\"https://www.youtube.com/embed/ykkeliDAs-c\" frameborder=\"0\" allowfullscreen style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>\n<h2>Noteable changes v1.22 introduces</h2>\n<p>You can find a complete list of all the updates in the <a href=\"https://github.com/serverless/serverless/blob/master/CHANGELOG.md\">CHANGELOG.md</a> file.</p>\n<h3>Spotinst Functions provider support</h3>\n<p>After releasing the <a href=\"https://serverless.com/blog/serverless-v1.21.0/\">Kubeless provider integration</a> with v1.21 we’re doing it again.</p>\n<p>This time we’re proud to announce the official “Spotinst Functions” provider integration. Spotinst will help you dramatically reduce your FaaS costs by leveraging spot instances. You could save between 50% and 80% compared to standard serverless FaaS pricing.</p>\n<p>Eager to give it a try?</p>\n<p>Just follow the <a href=\"https://serverless.com/framework/docs/providers/spotinst/guide/quick-start/\">“Quick Start”</a> instructions in our docs!</p>\n<p>Also make sure to read the <a href=\"https://serverless.com/blog/running-multi-cloud-functions-at-spot-instance-prices/\">announcement blog post</a> to learn more about <a href=\"https://spotinst.com/products/spotinst-functions/\">Spotinst Functions</a>.</p>\n<h3>CLI based plugin management with the <code class=\"language-text\">serverless plugin</code> command</h3>\n<p>It’s finally here! Serverless supports a way to browse, install and uninstall Serverless plugins from within the CLI.</p>\n<p>No need to add the plugin of your choice manually to <code class=\"language-text\">serverless.yml</code> or run <code class=\"language-text\">npm</code> side-by-side with the Serverless CLI.</p>\n<p>Let’s assume we want to install a <code class=\"language-text\">Webpack</code> plugin for our Serverless service.</p>\n<p>We can run <code class=\"language-text\">serverless plugin search --query webpack</code> to search for all the available Serverless plugins which add Webpack support to the Serverless Framework:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@64d555c6e40a:/app<span class=\"token comment\"># serverless plugin search --query webpack</span>\n<span class=\"token number\">2</span> plugin<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> found <span class=\"token keyword\">for</span> your search query <span class=\"token string\">\"webpack\"</span>\n\nserverless-plugin-webpack - A serverless plugin to automatically bundle your functions individually with webpack\nserverless-webpack - Serverless plugin to bundle your lambdas with Webpac\n\nTo <span class=\"token function\">install</span> a plugin run <span class=\"token string\">'serverless plugin install --name plugin-name-here'</span>\n\nIt will be automatically downloaded and added to your package.json and serverless.yml <span class=\"token function\">file</span></code></pre></div>\n<p>After deciding which plugin to use we simply run <code class=\"language-text\">serverless plugin install --name serverless-webpack</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@64d555c6e40a:/app<span class=\"token comment\"># serverless plugin install --name serverless-webpack</span>\nServerless: Creating an empty package.json <span class=\"token function\">file</span> <span class=\"token keyword\">in</span> your <span class=\"token function\">service</span> directory\nServerless: Installing plugin <span class=\"token string\">\"serverless-webpack@latest\"</span> <span class=\"token punctuation\">(</span>this might take a few seconds<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">)</span>\nServerless: Successfully installed <span class=\"token string\">\"serverless-webpack@latest\"</span></code></pre></div>\n<p>That’s it. Serverless will do all the heavy lifting behind the scenes (creating an empty <code class=\"language-text\">package.json</code> file (if not yet present), installing the plugin with its peer dependencies, adding the plugin to the <code class=\"language-text\">serverless.yml</code> file, …). After doing that we’re off the races.</p>\n<p>If we want to remove a plugin from our service we simply run the <code class=\"language-text\">serverless plugin uninstall</code> command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">root@64d555c6e40a:/app<span class=\"token comment\"># serverless plugin uninstall --name serverless-webpack</span>\nServerless: Uninstalling plugin <span class=\"token string\">\"serverless-webpack\"</span> <span class=\"token punctuation\">(</span>this might take a few seconds<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">)</span>\nServerless: Successfully uninstalled <span class=\"token string\">\"serverless-webpack\"</span></code></pre></div>\n<p><strong>Note:</strong> Serverless pulls plugin information from the official <a href=\"https://github.com/serverless/plugins\"><code class=\"language-text\">serverless/plugins</code> repository</a>. Make sure to add yours if you want your plugin to be installable via the CLI as well.</p>\n<p><strong>Aside:</strong> The old way of using <code class=\"language-text\">npm</code> to install / uninstall plugins will continue to work as well!</p>\n<h3>SSM Parameters in Serverless Variables</h3>\n<p>AWS SSM Parameters are a great and recommended way to share encrypted variables between and within services.</p>\n<p>Serverless v1.22 introduces support for SSM Parameters via the Serverless Variables system.</p>\n<p>Let’s assume that we’ve set the following SSM Parameters:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aws ssm put-parameter --name foo --value bar --type SecureString\naws ssm put-parameter --name bar --value foo --type String\naws ssm put-parameter --name /foo/bar --value bar --type SecureString\naws ssm put-parameter --name /bar/foo --value foo --type String</code></pre></div>\n<p>We could access those values in your <code class=\"language-text\">serverless.yml</code> file as follows (where <code class=\"language-text\">~true</code> means that the value will be decrypted):</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>service\n\n<span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">runtime</span><span class=\"token punctuation\">:</span> nodejs6.10\n\n<span class=\"token key atrule\">custom</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">foo</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>ssm<span class=\"token punctuation\">:</span>foo<span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">bar</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>ssm<span class=\"token punctuation\">:</span>bar~true<span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">fooBar</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>ssm<span class=\"token punctuation\">:</span>/foo/bar<span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">barFoo</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span>ssm<span class=\"token punctuation\">:</span>/bar/foo~true<span class=\"token punctuation\">}</span>\n  \n<span class=\"token comment\"># ...snip...</span></code></pre></div>\n<p>You can read more about the AWS SSM Parameter support in Serverless Variables in the <a href=\"https://serverless.com/framework/docs/providers/aws/guide/variables#reference-variables-using-the-ssm-parameter-store\">corresponding documentation</a>.</p>\n<h3>Update function config when running <code class=\"language-text\">deploy function</code></h3>\n<p>The <code class=\"language-text\">deploy function</code> command is an easy and fast way to update the functions code without the need to go through a full <code class=\"language-text\">serverless deploy</code>. <code class=\"language-text\">deploy function</code> will push a function’s code directly into the Lamdba function making it way faster than a CloudFormation stack update.</p>\n<p>From now on <code class=\"language-text\">deploy function</code> will also update the function’s configuration. So making quick changes to your function’s settings is even easier.</p>\n<p><strong>Note:</strong> Remember that doing a <code class=\"language-text\">deploy function</code> will put your Stack into an inconsistent state since the function and its configuration is different than the one which is described via CloudFormation. A subsequent <code class=\"language-text\">serverless deploy</code> will overwrite this state completely.</p>\n<p><code class=\"language-text\">deploy function</code> should only be used for faster development cycles. Production deployments should always be done via <code class=\"language-text\">deploy</code> (and therefore through CloudFormation).</p>\n<h3>New <code class=\"language-text\">aws-kotlin-jvm-maven</code> service template</h3>\n<p><a href=\"https://kotlinlang.org/\">Kotlin</a> is a new programming language which gained significant traction when Google announced the partnership for their Android project.</p>\n<p>Since Kotlin can run on different platforms such as the JVM it’s theoretically possible to run it on AWS Lambda as well.</p>\n<p>Serverless v1.22 ships with the new <code class=\"language-text\">aws-kotlin-jvm-maven</code> template which makes it possible to create Kotlin-based Serverless services!</p>\n<p>Creating a new Kotlin service is as easy as:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless create --template aws-kotlin-jvm-maven</code></pre></div>\n<p><strong>Aside:</strong> There’s already a <a href=\"https://github.com/serverless/serverless/pull/4239\">WIP PR</a> which adds support for a Kotlin service template which utilizes the Node.js runtime.</p>\n<h3>Other enhancements &#x26; bug fixes</h3>\n<p>This release also includes tons of other improvements and bug fixes.</p>\n<blockquote>\n<p>Thank you very much for reporting bugs, opening issues and joining the discussions!</p>\n</blockquote>\n<p>We hope that you enjoy this release! Feel free to provide some feedback in our <a href=\"https://forum.serverless.com\">Forum</a>, via <a href=\"https://twitter.com/goserverless\">Twitter</a> or on <a href=\"https://github.com/serverless/serverless\">GitHub</a>.</p>\n<h3>Contributors</h3>\n<p>This release contains lots of hard work from our beloved community, and wouldn’t have been possible without passionate people who decided to spend their time contributing back to make the Serverless Framework better.</p>\n<p>Huge round of applause to all of the contributors who submitted changes for this release:</p>\n<ul>\n<li>Daniel Schep</li>\n<li>Frank Schmid</li>\n<li>Iddar Olivares</li>\n<li>Javier Arellano</li>\n<li>Loren Gordon</li>\n<li>Marc Sluiter</li>\n<li>Mariusz Nowak</li>\n<li>Mislav Cimperšak</li>\n<li>Rafal Wilinski</li>\n<li>Takahiro Horike</li>\n<li>Toby Hede</li>\n<li>forevermatt</li>\n</ul>\n<h2>Upcoming releases / contributions</h2>\n<p>In addition to the <a href=\"https://github.com/serverless/serverless/milestone/38\">1.23 milestone</a> and its Issues and PRs, we still have lots and lots of other <a href=\"https://github.com/serverless/serverless/issues\">Issues</a> and <a href=\"https://github.com/serverless/serverless/pulls\">PRs</a>. We’d love to implement and introduce these in some of the upcoming releases.</p>\n<blockquote>\n<p>Do you want to help out and improve the Serverless Framework?</p>\n</blockquote>\n<p>Great! We’ve compiled a list with some of the most wished features to make it easier for you to find areas where we could most use a hand.</p>\n<h3>Deploy many micro/nano services to one API Gateway</h3>\n<p><a href=\"https://github.com/serverless/serverless/issues/3078\">Issue #3078</a></p>\n<p>We already started a WIP implementation with the following <a href=\"https://github.com/serverless/serverless/pull/3934\">PR</a>, but for now it only provides a partial solution. Do you have any ideas how we can improve the support for this feature?</p>\n<h3>Unable to create services with a high resource count</h3>\n<p><a href=\"https://github.com/serverless/serverless/issues/2387\">Issue #2387</a></p>\n<p>Services can grow significantly in size. We’ve worked on different solutions for this problem (see <a href=\"https://github.com/serverless/serverless/pull/3504\">this PR</a>) but we’re still not 100% there yet.</p>\n<h3>Support for AWS API Gateway Basic Request Validation</h3>\n<p><a href=\"https://github.com/serverless/serverless/issues/3464\">Issue #3464</a></p>\n<p>We’re currently looking for a way to implement basic request validation via raw CloudFormation.</p>\n<h3>Let resources depend on the ApiGateway::Deployment</h3>\n<p><a href=\"https://github.com/serverless/serverless/issues/2233\">Issue #2233</a></p>\n<p>The <code class=\"language-text\">ApiGateway::Deployment</code> resource has a random string in its name so that deployments are re-triggered on AWS end.</p>\n<p>This makes it hard to create other CloudFormation resources which dependend on it.</p>\n<h3>Skip resource if already exists</h3>\n<p><a href=\"https://github.com/serverless/serverless/issues/3183\">Issue #3183</a></p>\n<p>It would be nice to skip resource delpoyments if the corresponding resource already exists (e.g. when using DynamoDB tables). Could you think of a reliable, production ready way that will detect which resources deployments could be skipped?</p>\n<h3>Global arn parser with intrinsic functions (Ref, Fn::GetAtt, Fn::ImportValue, …) support</h3>\n<p><a href=\"https://github.com/serverless/serverless/issues/3212\">Issue #3212</a></p>\n<p><code class=\"language-text\">arns</code> are used everywhere in CloudFormation. However some of our event sources don’t support all the different types of intrinsic functions which can be used to reference <code class=\"language-text\">arns</code>.</p>\n<p>It would be great to have a global <code class=\"language-text\">arn</code> parser which can be re-used throughout the whole codebase. This parser could also be exposed to the framework user e.g. via <code class=\"language-text\">this.provider.findAllCfReferences()</code>, so that plugin authors can benefit from this functionality as well.</p>\n<h3>Other issues and PRs</h3>\n<p>This list is just a gist with some of the most wished features from our community.</p>\n<p>We have lots of other <a href=\"https://github.com/serverless/serverless/issues\">issues</a> where you could leave some feedback or jump directly into the implementation.</p>\n<p>Additionally <a href=\"https://github.com/serverless/serverless/pulls\">PR reviews</a> are also highly welcomed as they greatly speed up the time-to-merge.</p>\n<h2>Serverless Examples</h2>\n<p>The <a href=\"https://github.com/serverless/examples\">Serverless Examples Repository</a> is an excellent resource if you want to explore some real world examples, or learn more about the Serverless Framework and serverless architectures in general.</p>\n<h2>Serverless Plugins</h2>\n<p>Serverless provides a completely customizable and pluggable codebase. Our community has written a vast amount of awesome plugins you can use to further enhance the capabilities of the Framework. You can find the full list at our <a href=\"https://github.com/serverless/plugins\">Serverless Plugins Repository</a>.</p>\n<p>Don’t hestitate to open up a PR over there if you’ve authored or found a new Serverless plugin!</p>","frontmatter":{"title":"Serverless v1.22 - CLI-based plugin discovery, encrypted variables support and new provider SpotInst","date":"September 14, 2017","description":"CLI based plugin management, SSM via Serverless Variables, Spotinst Functions support, enhancements, bug fixes and more added in the Serverless Framework v1.22 release."}}},"pageContext":{"slug":"/posts/2017-09-14-serverless-v1.22.0/","previous":{"fields":{"slug":"/posts/2017-09-12-event-driven-serverless-app-local-dev-exp/"},"frontmatter":{"title":"Writing an Event-driven Serverless Application with Full Local Development Experience"}},"next":{"fields":{"slug":"/posts/2017-09-15-understanding-and-controlling-aws-lambda-costs/"},"frontmatter":{"title":"Understanding and Controlling AWS Lambda Costs"}}}}}