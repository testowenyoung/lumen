{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2019-07-01-framework-release-v146/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"171cf0e5-0b2f-53eb-aeb6-2940639c67c4","excerpt":"The Serverless Framework v1.46.0 release adds new ways to configure conditions for ALB events, support for externally managed Websocket APIs and local pluginsâ€¦","html":"<p>\nThe Serverless Framework v1.46.0 release adds new ways to configure conditions for ALB events, support for externally managed Websocket APIs and local plugins which can be referenced via relative file paths. Weâ€™ve also addressed a number of enhancements and bug fixes. In total 5 bugs were fixed and 5 enhancements were merged and are now available through our v1.46.0 release.</p>\n<p>Please ensure that youâ€™re using an up to date Node version when working with the Serverless Framework.</p>\n<h4>Support for new ALB conditions</h4>\n<p>In our last <a href=\"https://serverless.com/blog/framework-release-v145/\">Serverless Framework v1.45.0 release</a> we introduced support for the ALB event source which is a compelling replacement for the sophisticated, but costly AWS API Gateway service. While API Gateway is still superior for complex API setups one can achieve quite a lot with the much cheaper ALB service offering.</p>\n<p>This release extends the ALB event source capabilities by adding support for different conditions which need to be met in order for the ALB to route incoming requests to the connected Lambda function. ALB event sources can now be configured to accept different headers, IP addresses, methods, query strings and multiple paths.</p>\n<p>The following shows a complex ALB setup in which we leverage the new config options:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.hello\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">alb</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">listenerArn</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> HTTPListener <span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">priority</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n          <span class=\"token key atrule\">conditions</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span>\n              <span class=\"token punctuation\">-</span> /first<span class=\"token punctuation\">-</span>path\n              <span class=\"token punctuation\">-</span> /second<span class=\"token punctuation\">-</span>path\n            <span class=\"token key atrule\">method</span><span class=\"token punctuation\">:</span>\n              <span class=\"token punctuation\">-</span> POST\n              <span class=\"token punctuation\">-</span> PATCH\n            <span class=\"token key atrule\">query</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">bar</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n            <span class=\"token key atrule\">ip</span><span class=\"token punctuation\">:</span>\n              <span class=\"token punctuation\">-</span> 192.168.0.1/0\n            <span class=\"token key atrule\">header</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> alb<span class=\"token punctuation\">-</span>event<span class=\"token punctuation\">-</span>source\n            <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span>\n              <span class=\"token punctuation\">-</span> example.com</code></pre></div>\n<p>Do you want to learn more about ALB and how it can save you money if you use it as an API Gateway replacement? You can read more about the ALB event source and its capabilities in our <a href=\"https://serverless.com/blog/framework-release-v145/\">v1.45.0 release blog post</a>.</p>\n<h4>External Websocket APIs</h4>\n<p>Most Serverless Framework applications start with one <code class=\"language-text\">serverless.yml</code> file in which the whole application with all its infrastructure components is described. While this is sufficient in the beginning itâ€™s recommended to split the whole application up into different services and use a separate <code class=\"language-text\">serverless.yml</code> file for every service.</p>\n<p>Splitting up an application into different services makes it a requirement for certain resources to be shared between such services. One very common resource type which needs to be shared across services are APIs.</p>\n<p>The Serverless Framework already supports an easy way to introduce an external REST API to a service, making it possible to re-use and extend that API within the service.</p>\n<p>In our v1.46.0 release weâ€™re extending the support for external APIs to include Websocket APIs. </p>\n<p>Introducing an existing Websocket API into an existing service is as easy as using the <code class=\"language-text\">websocketApiId</code> config parameter under the <code class=\"language-text\">provider.apiGateway</code> property.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws\n  <span class=\"token key atrule\">apiGateway</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">websocketApiId</span><span class=\"token punctuation\">:</span> xxxxxxxxxx <span class=\"token comment\"># Websocket API resource id</span></code></pre></div>\n<p>Do you want to learn more about best practices on how to split up your API-driven application into different services? Our <a href=\"https://serverless.com/framework/docs/providers/aws/events/apigateway/\">API Gateway documentation</a> provides some more insights into this.</p>\n<h4>Local plugins via relative paths</h4>\n<p>Our Serverless Framework <a href=\"https://serverless.com/framework/docs/providers/aws/guide/plugins/\">plugin architecture</a> provides an easy way to extend Serverless in various different ways to meet specific business needs.</p>\n<p>The community has been working hard on <a href=\"https://serverless.com/plugins/\">hundreds of plugins</a> to help other Serverless developers achieve certain goals and make Serverless development easier than ever.</p>\n<p>While one can easily distribute and consume plugins via <code class=\"language-text\">npm</code> itâ€™s sometimes necessary to work with plugins which are project specific or maybe not yet distributed via <code class=\"language-text\">npm</code>. Perhaps you wish to maintain your own plugins itnernally?</p>\n<p>Up until now there was a clear distinction between <code class=\"language-text\">npm</code> hosted plugins and local plugins. The only way to work with local plugins was to leverage the <code class=\"language-text\">plugin.localPath</code> configuration. Using that meant that only local plugins were supported for the whole service and <code class=\"language-text\">npm</code> hosted plugins were no longer an option..</p>\n<p>Our v1.46.0 release finally makes it possible to mix <code class=\"language-text\">npm</code> hosted and local plugins in an easy way.</p>\n<p>Hereâ€™s an example where we use the infamous <a href=\"https://serverless.com/plugins/serverless-offline/\"><code class=\"language-text\">serverless-offline</code> plugin</a> alongside a plugin which is project specific and stored in a separate directory of our service.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> serverless<span class=\"token punctuation\">-</span>offline\n  <span class=\"token punctuation\">-</span> ./plugins/acme/auditing</code></pre></div>\n<h4>Bug Fixes</h4>\n<ul>\n<li><a href=\"https://github.com/serverless/serverless/pull/4427\">#4427</a> Split IAM Policy from IAM Role &#x26; Improve DependsOn for Streams<a href=\"https://github.com/serverless/serverless/pull/4427/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+120</span>/<span style=\"color:#cb2431\">-51</span></a> <a href=\"https://github.com/alexcasalboni\"> <img src=\"https://avatars1.githubusercontent.com/u/2457588?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> alexcasalboni</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6244\">#6244</a> Fix duplicate packaging issue<a href=\"https://github.com/serverless/serverless/pull/6244/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+52</span>/<span style=\"color:#cb2431\">-17</span></a> <a href=\"https://github.com/alexdebrie\"> <img src=\"https://avatars3.githubusercontent.com/u/6509926?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> alexdebrie</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6255\">#6255</a> Fix lambda integration timeout response template<a href=\"https://github.com/serverless/serverless/pull/6255/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+27</span>/<span style=\"color:#cb2431\">-2</span></a> <a href=\"https://github.com/medikoo\"> <img src=\"https://avatars3.githubusercontent.com/u/122434?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> medikoo</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6268\">#6268</a> Fix #6267<a href=\"https://github.com/serverless/serverless/pull/6268/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+1</span>/<span style=\"color:#cb2431\">-1</span></a> <a href=\"https://github.com/JonathanWilbur\"> <img src=\"https://avatars0.githubusercontent.com/u/20342114?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> JonathanWilbur</a></li>\n<li>\n<p><a href=\"https://github.com/serverless/serverless/pull/6281\">#6281</a> Do not set tty on stdin if no tty available<a href=\"https://github.com/serverless/serverless/pull/6281/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+2</span>/<span style=\"color:#cb2431\">-2</span></a> <a href=\"https://github.com/jpetitcolas\"> <img src=\"https://avatars0.githubusercontent.com/u/688373?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> jpetitcolas</a></p>\n<h4>Enhancements</h4>\n</li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6200\">#6200</a> Remove default stage value in provider object<a href=\"https://github.com/serverless/serverless/pull/6200/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+109</span>/<span style=\"color:#cb2431\">-111</span></a> <a href=\"https://github.com/mydiemho\"> <img src=\"https://avatars2.githubusercontent.com/u/1634185?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> mydiemho</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6258\">#6258</a> Fix: Update azure template<a href=\"https://github.com/serverless/serverless/pull/6258/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+6</span>/<span style=\"color:#cb2431\">-138</span></a> <a href=\"https://github.com/tbarlow12\"> <img src=\"https://avatars0.githubusercontent.com/u/10962815?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> tbarlow12</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6280\">#6280</a> Remove package-lock.json and shrinkwrap scripts<a href=\"https://github.com/serverless/serverless/pull/6280/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+3</span>/<span style=\"color:#cb2431\">-9384</span></a> <a href=\"https://github.com/medikoo\"> <img src=\"https://avatars3.githubusercontent.com/u/122434?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> medikoo</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6285\">#6285</a> Use naming to get stackName<a href=\"https://github.com/serverless/serverless/pull/6285/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+2</span>/<span style=\"color:#cb2431\">-2</span></a> <a href=\"https://github.com/joetravis\"> <img src=\"https://avatars1.githubusercontent.com/u/3687269?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> joetravis</a></li>\n<li>\n<p><a href=\"https://github.com/serverless/serverless/pull/6293\">#6293</a> Add ip, method, header and query conditions to ALB events<a href=\"https://github.com/serverless/serverless/pull/6293/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+270</span>/<span style=\"color:#cb2431\">-11</span></a> <a href=\"https://github.com/cbm-egoubely\"> <img src=\"https://avatars2.githubusercontent.com/u/39260821?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> cbm-egoubely</a></p>\n<h4>Documentation</h4>\n</li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6225\">#6225</a> Update docs | dont use provider.tags with shared API Gateway<a href=\"https://github.com/serverless/serverless/pull/6225/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+2</span>/<span style=\"color:#cb2431\">-0</span></a> <a href=\"https://github.com/OskarKaminski\"> <img src=\"https://avatars3.githubusercontent.com/u/7963279?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> OskarKaminski</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6228\">#6228</a> Fix formatting issue with Markdown link<a href=\"https://github.com/serverless/serverless/pull/6228/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+2</span>/<span style=\"color:#cb2431\">-2</span></a> <a href=\"https://github.com/awayken\"> <img src=\"https://avatars1.githubusercontent.com/u/156215?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> awayken</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6275\">#6275</a> fixed a typo ðŸ–Š<a href=\"https://github.com/serverless/serverless/pull/6275/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+1</span>/<span style=\"color:#cb2431\">-1</span></a> <a href=\"https://github.com/floydnoel\"> <img src=\"https://avatars3.githubusercontent.com/u/4154431?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> floydnoel</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6279\">#6279</a> Update variables.md<a href=\"https://github.com/serverless/serverless/pull/6279/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+1</span>/<span style=\"color:#cb2431\">-1</span></a> <a href=\"https://github.com/ElinksFr\"> <img src=\"https://avatars1.githubusercontent.com/u/32840264?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> ElinksFr</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6286\">#6286</a> Added correction based on community feedback<a href=\"https://github.com/serverless/serverless/pull/6286/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+1</span>/<span style=\"color:#cb2431\">-1</span></a> <a href=\"https://github.com/garethmcc\"> <img src=\"https://avatars1.githubusercontent.com/u/4112280?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> garethmcc</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6288\">#6288</a> Remove README redundant link<a href=\"https://github.com/serverless/serverless/pull/6288/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+0</span>/<span style=\"color:#cb2431\">-1</span></a> <a href=\"https://github.com/Hazlank\"> <img src=\"https://avatars0.githubusercontent.com/u/15724316?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> Hazlank</a></li>\n<li>\n<p><a href=\"https://github.com/serverless/serverless/pull/6292\">#6292</a> Fix typo in link to ALB docs<a href=\"https://github.com/serverless/serverless/pull/6292/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+1</span>/<span style=\"color:#cb2431\">-1</span></a> <a href=\"https://github.com/schellack\"> <img src=\"https://avatars0.githubusercontent.com/u/70819?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> schellack</a></p>\n<h4>Features</h4>\n</li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6261\">#6261</a> #6017 Allow to load plugin from path<a href=\"https://github.com/serverless/serverless/pull/6261/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+18</span>/<span style=\"color:#cb2431\">-7</span></a> <a href=\"https://github.com/mnapoli\"> <img src=\"https://avatars3.githubusercontent.com/u/720328?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> mnapoli</a></li>\n<li><a href=\"https://github.com/serverless/serverless/pull/6272\">#6272</a> Feature/support external websocket api<a href=\"https://github.com/serverless/serverless/pull/6272/files?utf8=âœ“&diff=split\" style=\"text-decoration:none;\"> <span style=\"color:#28a647\">+193</span>/<span style=\"color:#cb2431\">-103</span></a> <a href=\"https://github.com/christophgysin\"> <img src=\"https://avatars0.githubusercontent.com/u/527924?v=4\" style=\"vertical-align: middle\" alt height=\"20px\"> christophgysin</a></li>\n</ul>\n<h3>Contributor thanks</h3>\n<p>With 18 different contributors, thanks again to all community members that got involved with this release to make it a success.</p>","frontmatter":{"title":"Serverless Framework v1.46.0 - Extended ALB configurability, Support for external Websocket APIs, Local plugins via relative paths & More","date":"July 01, 2019","description":"Check out whatâ€™s included in Serverless Framework v1.46."}}},"pageContext":{"slug":"/posts/2019-07-01-framework-release-v146/","previous":{"fields":{"slug":"/posts/2019-06-27-outputs-and-secrets/"},"frontmatter":{"title":"Managing Secrets and Output Variables With Serverless Framework Enterprise"}},"next":{"fields":{"slug":"/posts/2019-07-02-graphql-api-mysql-postgres-aurora/"},"frontmatter":{"title":"How to Create a Serverless GraphQL API for MySQL, Postgres and Aurora"}}}}}