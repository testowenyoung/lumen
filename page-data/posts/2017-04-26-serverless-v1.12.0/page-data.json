{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2017-04-26-serverless-v1.12.0/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"3c53168a-1b4e-5e24-bca2-374cb6db0f98","excerpt":"It’s time for the new Serverless Framework v1.12 release! Let’s take a look at all the new features and improvements. Highlights of 1.12.0 Note: You can find a…","html":"<p>It’s time for the new Serverless Framework v1.12 release! Let’s take a look at all the new features and improvements.</p>\n<h2>Highlights of 1.12.0</h2>\n<p><strong>Note:</strong> You can find a complete list of all the updates in the <a href=\"https://github.com/serverless/serverless/blob/master/CHANGELOG.md\">changelog</a>.</p>\n<h3>Separate <code class=\"language-text\">package</code> and <code class=\"language-text\">deploy</code> command</h3>\n<p>This long awaited feature has arrived! Serverless v1.12 introduces a way to separate the packaging step from the deployment of your service.</p>\n<p>This gives you more control over the build process, which will also improve CI/CD usage in combination with the Serverless Framework.</p>\n<p>Let’s take a closer at look how we can use this new feature.</p>\n<h4>The <code class=\"language-text\">package</code> command</h4>\n<p>The <code class=\"language-text\">package</code> command enables you to package all of your service artifacts and store them on your disk.</p>\n<p>Running the following command will build and save all of the deployment artifacts in the service’s <code class=\"language-text\">.serverless</code> directory:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless package</code></pre></div>\n<p>However, you can also use the <code class=\"language-text\">--package</code> option to add a destination path and Serverless will store your deployment artifacts there (<code class=\"language-text\">./my-artifacts</code> in the following case):</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless package --package my-artifacts</code></pre></div>\n<h4>The updated <code class=\"language-text\">deploy</code> command</h4>\n<p>The “simple” deployment process via <code class=\"language-text\">serverless deploy</code> has not changed. It will still package all of your artifacts, store them in the <code class=\"language-text\">.serverless</code> directory and deploy your service after that:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless deploy</code></pre></div>\n<p>However, you’re now able to use the <code class=\"language-text\">--package</code> option to specify which package you want to use for deployment:\t\t</p>\n<p><strong>Note:</strong> This package needs to be created (e.g. with the <code class=\"language-text\">serverless package</code> command) and available beforehand.\t</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless deploy --package my-artifacts</code></pre></div>\n<p>Furthermore, you can set the path to the package directory in your <code class=\"language-text\">serverless.yml</code> file like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">package</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>artiacts</code></pre></div>\n<p>Serverless will now use this path automatically if you run the <code class=\"language-text\">deploy</code> command <strong>without</strong> the <code class=\"language-text\">--package</code> option:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless deploy</code></pre></div>\n<h3>Python 3.6 support</h3>\n<p>AWS <a href=\"https://aws.amazon.com/de/about-aws/whats-new/2017/04/aws-lambda-supports-python-3-6/\">recently announced</a> support for Python 3.6 and added the corresponding runtime to their Lambda compute service.</p>\n<p>Serverless has you covered and ships with a new <code class=\"language-text\">aws-python3</code> template you can use to deploy your Python 3 services to AWS.</p>\n<p>Run the following command to generate a new Python 3 template:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless create --template aws-python3</code></pre></div>\n<p>You can also migrate an “old” Python 2 service so that it uses the new <code class=\"language-text\">python3.6</code> runtime:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">provider:\n<span class=\"token unchanged\">  name: aws\n</span><span class=\"token deleted-sign deleted\">- runtime: python2.7\n</span><span class=\"token inserted-sign inserted\">+ runtime: python3.6</span></code></pre></div>\n<p>Just make sure that your code is compatible with Python 3 and run <code class=\"language-text\">serverless deploy</code> to update your service.</p>\n<p>The <code class=\"language-text\">serverless invoke local</code> command was also updated so that you can emulate a Python 3 function invocation locally.</p>\n<h3>New OpenWhisk runtimes</h3>\n<p><a href=\"https://github.com/jthomas\">James Thomas</a> from the OpenWhisk team <a href=\"https://medium.com/openwhisk/serverless-framework-and-openwhisk-plugin-update-v0-6-1339cfdcd2d2\">recently announced v0.6</a> of the official Serverless <a href=\"https://github.com/serverless/serverless-openwhisk\">OpenWhisk provider plugin</a>.</p>\n<p>This update is a huge step forwards as it now supports Python, Swift, Docker and Binaries as runtimes.</p>\n<p>Serverless Framework v1.12 adds the <code class=\"language-text\">openwhisk-python</code> and <code class=\"language-text\">openwhisk-swift</code> templates to streamline this process.</p>\n<p>Just run the following command to create a new Python template:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless create --template openwhisk-python</code></pre></div>\n<p>This command will generate a new Swift service template for you:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">serverless --create openwhisk-swift</code></pre></div>\n<p>Curious how to take it from there? Take a look at the docs to learn more:</p>\n<ul>\n<li><a href=\"https://github.com/serverless/serverless-openwhisk#writing-functions---python\">Writing Functions with Python</a></li>\n<li><a href=\"https://github.com/serverless/serverless-openwhisk#writing-functions---swift\">Writing Functions with Swift</a></li>\n<li><a href=\"https://github.com/serverless/serverless-openwhisk#writing-functions---docker\">Writing Functions with Docker</a></li>\n<li><a href=\"https://github.com/serverless/serverless-openwhisk#writing-functions---binary\">Writing Functions with Binaries</a></li>\n</ul>\n<h3>Intrinsic function support for SNS events</h3>\n<p>The SNS event source is now updated so that it supports CloudFormation intrinsic functions such as <code class=\"language-text\">Fn::GetAtt</code>.</p>\n<p>This way you can e.g. reference other resources in your <code class=\"language-text\">serverless.yml</code> <code class=\"language-text\">resources</code> section.</p>\n<p>Here’s an in-depth example of what this looks like in practice:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">functions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ingestFn1</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> handler.hello\n    <span class=\"token key atrule\">events</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">sns</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">topicName</span><span class=\"token punctuation\">:</span> myTopic\n          <span class=\"token key atrule\">arn</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">Fn::Join</span><span class=\"token punctuation\">:</span>\n              <span class=\"token punctuation\">-</span> <span class=\"token string\">\"\"</span>\n              <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span> <span class=\"token string\">\"arn:aws:sns:\"</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"AWS::Region\"</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token string\">\":\"</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"AWS::AccountId\"</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token string\">\":myTopic\"</span>\n\n<span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">myTopic</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SNS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Topic\n      <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">TopicName</span><span class=\"token punctuation\">:</span> myTopic\n        <span class=\"token key atrule\">Subscription</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span>\n            <span class=\"token key atrule\">Endpoint</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">Fn::Join</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token string\">\"\"</span>\n                <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span> <span class=\"token string\">\"arn:aws:sqs:\"</span>\n                  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"AWS::Region\"</span>\n                  <span class=\"token punctuation\">-</span> <span class=\"token string\">\":\"</span>\n                  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Ref</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"AWS::AccountId\"</span>\n                  <span class=\"token punctuation\">-</span> <span class=\"token string\">\":mySqs\"</span>\n            <span class=\"token key atrule\">Protocol</span><span class=\"token punctuation\">:</span> sqs</code></pre></div>\n<p>Take a look at the <a href=\"https://serverless.com/framework/docs/providers/aws/events/sns/\">SNS documentation</a> for more information.</p>\n<h3>An important note for plugin authors</h3>\n<p>The separation of the <code class=\"language-text\">package</code> and <code class=\"language-text\">deploy</code> command was a tough one since our goal was to introduce this change in a non-breaking way.</p>\n<p><a href=\"https://github.com/HyperBrain\">Frank Schmid</a> worked really hard on new concepts around our core plugin system to help plugin authors deprecate and redirect lifecycle usages. This makes it possible to use both old lifecycle events and new lifecycle events alongside each other.</p>\n<p>A huge thanks goes out to Frank for all his ideas and help here since these additions made it possible to introduce the package and deploy separation in a non-breaking way! (As a day-to-day Framework user you might not even notice a difference altough the whole system behind the scenes works entirely differently)</p>\n<p>This release includes the option to show a warning message if a plugin hooks into deprecated lifecycle events.\n\nShowing this warning message is disabled by default. You need to enable it by setting the <code class=\"language-text\">SLS_DEBUG=*</code> system environment variable.</p>\n<p>After setting this you’ll see a message in the console every time your plugin uses an old lifecycle event.\t\t</p>\n<p><strong>We encourage all plugin authors to enable the debugging information and check whether their plugin uses old, deprecated lifecycle events.</strong></p>\n<p>You can see all the deprecated lifecycle events with the corresponding redirections Serverless introduces with v1.12 <a href=\"https://github.com/serverless/serverless/blob/07f837ddb67a40cee3e0c6b238e165023b4b7725/lib/plugins/deploy/deploy.js#L14-L19\">here</a>.</p>\n<p>Those lines of code also show how the redirection of deprecated lifecycle events works. So you can now use the same mechanism to deprecate your own plugin lifecycle events.</p>\n<p>Want to know more about this topic? Read <a href=\"https://gist.github.com/HyperBrain/bba5c9698e92ac693bb461c99d6cfeec\">Frank’s gist</a> to learn why this was needed and how it works behind the scenes.</p>\n<h3>Enhancements &#x26; Bug Fixes</h3>\n<p>This release also includes bug fixes and introduces several enhancements.</p>\n<blockquote>\n<p>Thanks for reporting bugs and opening issues!</p>\n</blockquote>\n<h3>Contributors</h3>\n<p>This release contains lots of hard work from our awesome community, and wouldn’t have been possible without passionate people who decided to spend their time contributing to make Serverless better.</p>\n<p>Thank You to all of the contributors who submitted changes for this release:</p>\n<ul>\n<li>Alex Oskotsky</li>\n<li>Daniel Schep</li>\n<li>Danny Varner</li>\n<li>Frank Schmid</li>\n<li>Hal Massey</li>\n<li>Huang Yunkun</li>\n<li>James Thomas</li>\n<li>Jeremy Thomerson</li>\n<li>Johannes Schickling</li>\n<li>Matt Hernandez</li>\n<li>Me OutPerformIt</li>\n<li>Rafal Wilinski</li>\n<li>Ryan Lewis</li>\n<li>horike37</li>\n</ul>\n<h3>Get Involved</h3>\n<p>Serverless has a really helpful, vibrant and awesome community. Want to help us build the best Serverless tooling out there?</p>\n<p>Contributing isn’t just about code! Chime in on <a href=\"https://github.com/serverless/serverless/labels/stage%2Fneeds-feedback\">discussions</a>, help with <a href=\"https://github.com/serverless/serverless/labels/kind%2Fdocs\">documentation updates</a> or <a href=\"https://github.com/serverless/serverless/pulls\">review Pull Requests</a>.</p>\n<p>Just filter by <a href=\"https://github.com/serverless/serverless/labels\">our labels</a> such as <a href=\"https://github.com/serverless/serverless/issues?q=is%3Aopen+is%3Aissue+label%3Astatus%2Feasy-pick\">easy-pick</a>, <a href=\"https://github.com/serverless/serverless/issues?q=is%3Aopen+is%3Aissue+label%3Astatus%2Fhelp-wanted\">help-wanted</a> or <a href=\"https://github.com/serverless/serverless/labels/stage%2Fneeds-feedback\">needs-feedback</a> to find areas where you can help us!</p>\n<p>Furthermore, we’re always seeking feedback from our community to build the features in the best way possible. <a href=\"https://github.com/serverless/serverless/labels/stage%2Fneeds-feedback\">Here’s a list</a> with issues where we need your feedback and insights in your real world usage of Serverless.</p>\n<h3>Using “Scope” to Contribute</h3>\n<p>We use our own Serverless open source tool called <a href=\"https://github.com/serverless/scope\">“Scope”</a> to manage the Framework’s development process:</p>\n<p><a href=\"https://serverless.com/framework/status/\">Serverless Framework Status Board</a></p>\n<p>Here you can see all the current discussions, to-be-reviewed PRs and recently closed issues and PRs.</p>\n<p>You can use this status board to see all the important things currently happening in the Framework development phase.</p>\n<h3>Next Steps</h3>\n<p>We’ve already started filling in the next <a href=\"https://github.com/serverless/serverless/milestones\">milestones</a>. Check out the <a href=\"https://github.com/serverless/serverless/milestone/28\">1.13 milestone</a> to see what we have planned for the next release.</p>\n<p>We hope that you like the new release! Let us know if you have any questions or feedback in <a href=\"http://forum.serverless.com/\">our Forum</a> or <a href=\"https://github.com/serverless/serverless/issues\">GitHub Issues</a>.</p>\n<h2>Serverless Examples</h2>\n<p>The <a href=\"https://github.com/serverless/examples\">Serverless Examples Repository</a> is an excellent resource if you want to explore some real world examples and learn more about what Serverless architectures look like.</p>","frontmatter":{"title":"New in Serverless v1.12 - Package/Deploy Command Separation for Better CI/CD Support","date":"April 26, 2017","description":"New package command, Python 3.6 support, new OpenWhisk runtimes and more in the Serverless Framework v1.12 release."}}},"pageContext":{"slug":"/posts/2017-04-26-serverless-v1.12.0/","previous":{"fields":{"slug":"/posts/2017-04-25-keep-your-lambdas-warm/"},"frontmatter":{"title":"Keeping Functions Warm - How To Fix AWS Lambda Cold Start Issues"}},"next":{"fields":{"slug":"/posts/2017-05-01-serverless-air-episode-two/"},"frontmatter":{"title":"Serverless Air #2 - The Serverless ecosystem now & where it's going with Jared Short"}}}}}