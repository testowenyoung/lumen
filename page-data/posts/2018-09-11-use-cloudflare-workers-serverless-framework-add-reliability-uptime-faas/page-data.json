{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2018-09-11-use-cloudflare-workers-serverless-framework-add-reliability-uptime-faas/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"78fc97ff-8a12-5a9b-bcbe-bfaf0cebacd7","excerpt":"If you haven’t heard of Cloudflare Workers, serverless developers are already using them to cut costs, and add uptime and reliability to their Functions-as-a…","html":"<p>If you haven’t heard of Cloudflare Workers, <a href=\"https://www.troyhunt.com/serverless-to-the-max-doing-big-things-for-small-dollars-with-cloudflare-workers-and-azure-functions/\">serverless developers are already using them</a> to cut costs, and add uptime and reliability to their Functions-as-a-Service. And now, you can deploy Cloudflare Workers from the Serverless Framework CLI as easily as you deploy to Lambda, Azure, or Google Cloud Functions!</p>\n<p>Read more on how Cloudflare Workers can add even more robustness to your existing FaaS applications, and how to integrate it with the Serverless Framework.</p>\n<h4>What are Cloudflare Workers?</h4>\n<p>Cloudflare offers a suite of products which add performance, security, and reliability for your website.</p>\n<p>They accelerate applications through their CDN, scan for malicious traffic patterns to proactively block DDoS attacks, provide DNS and free SSL, and load balance against origin servers to ensure application availability.</p>\n<p>But most importantly for the serverless world, the Cloudflare team recently announced Cloudflare Workers—edge programmable bits of logic based on W3C Service Workers spec.</p>\n<p>Cloudflare Workers ultimately function similarly to a FaaS provider (like Lambda or Azure Functions).</p>\n<h4>Why use Cloudflare Workers with Serverless?</h4>\n<p>FaaS providers like Lambda can provide your core business logic, doing things like connecting your application with existing infrastructure.</p>\n<p>Cloudflare Workers are there to <em>enhance</em> your business logic: you can enforce geo-based access policies, for example, or perform A/B testing with a Cloudflare workers script (instead of integrating that into your core business logic).</p>\n<p>With the Cache API in Cloudflare Workers, you can also implement a custom caching logic to help reduce the operational and network costs.</p>\n<h5>Adding reliability and uptime</h5>\n<p>Using Cloudflare Workers can significantly enhance your existing FaaS implementations, adding reliability and uptime. Here’s an example:</p>\n<p>Say you misconfigure your AWS API Gateway, and all the requests going to your domain are failing. If you have a worker in Cloudflare, it can check whether the endpoint is working correctly. If it isn’t, Cloudflare can redirect them to a custom page, or send your users to a different region and issue an operational alert to notify the developer.</p>\n<p>That’s the beauty of using the Serverless Framework for your public cloud development—developers can deploy to multiple cloud providers from the same toolkit, easily taking advantage of the best features from each.</p>\n<h4>Get started with Cloudflare using the Serverless Framework</h4>\n<p>If you don’t already have Serverless installed, you’ll need to do that:</p>\n<p><code class=\"language-text\">npm install serverless@latest -g</code></p>\n<p>You’ll also need to <a href=\"https://dash.cloudflare.com/sign-up\">create a Cloudflare account</a>, and then <a href=\"https://developers.cloudflare.com/workers/api/\">grab your Cloudflare account and zone</a>.</p>\n<h5>Deploying your first Cloudflare Worker on the Serverless Framework</h5>\n<p>First, let’s create a template for Cloudflare workers:</p>\n<p> <code class=\"language-text\">serverless create --template cloudflare-workers --path new-project</code></p>\n<p>The <code class=\"language-text\">--path</code> should be set to whatever you would like to call your project. <code class=\"language-text\">cd</code> into your new project folder and\nrun <code class=\"language-text\">npm install</code>.</p>\n<p>In order to be able to deploy any Cloudflare Workers, You will need to set your Global API key from Cloudflare as an environmental variable named <code class=\"language-text\">CLOUDFLARE_AUTH_KEY</code>, and your Cloudflare account email as an environmental variable named <code class=\"language-text\">CLOUDFLARE_AUTH_EMAIL</code>. You can get your Global API key from your <a href=\"https://dash.cloudflare.com/profile\">Cloudflare profile</a> page. You will also need to set <code class=\"language-text\">accountId</code> and <code class=\"language-text\">zoneId</code> in <code class=\"language-text\">serverless.yml</code> under <code class=\"language-text\">service.config</code>. The first part of the path when you open <a href=\"https://dash.cloudflare.com/\">Cloudflare dashboard</a> as a logged in user is your <code class=\"language-text\">accountId</code> (e.g. <code class=\"language-text\">dash.cloudflare.com/{accountId}</code>). And the <code class=\"language-text\">zoneId</code> can be found from the overview tab after selecting the desired zone from the <a href=\"https://dash.cloudflare.com/\">Cloudflare dashboard</a>.</p>\n<p>Next, we can deploy a simple hello world:</p>\n<p><code class=\"language-text\">serverless deploy</code></p>\n<p>And test it to make sure it worked:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">serverless invoke --function helloWorld\n\nHello world</code></pre></div>\n<p>If we choose to, we can then remove the service with <code class=\"language-text\">serverless remove</code>.</p>\n<h4>Check out the docs</h4>\n<ul>\n<li><a href=\"https://github.com/serverless/serverless/blob/d119d406057c89d215c85848a24ded9ee739b246/docs/providers/cloudflare-workers/guide/quick-start.md\">See the full Quick Start guide here</a></li>\n</ul>","frontmatter":{"title":"Use Cloudflare Workers + Serverless Framework to add reliability and uptime to your FaaS","date":"September 11, 2018","description":"Cloudflare Workers integrates with the Serverless Framework. Use Cloudflare Workers to add reliability and uptime to your existing FaaS!"}}},"pageContext":{"slug":"/posts/2018-09-11-use-cloudflare-workers-serverless-framework-add-reliability-uptime-faas/","previous":{"fields":{"slug":"/posts/2018-09-10-serverless-framework-wins-best-microservices-api-awards/"},"frontmatter":{"title":"The Serverless Framework wins Best Microservices API at the API Awards!"}},"next":{"fields":{"slug":"/posts/2018-09-16-keeping-culture-remote-culture/"},"frontmatter":{"title":"Keeping the culture in remote culture"}}}}}