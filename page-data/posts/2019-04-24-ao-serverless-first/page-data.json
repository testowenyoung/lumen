{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2019-04-24-ao-serverless-first/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"6220fe47-a074-5b5c-99fc-acf5aff907b2","excerpt":"AO.com is one of the UK’s leading online electrical retailers, that is dedicated to giving its customers an exceptional experience, throughout the purchasing…","html":"<p>AO.com is one of the UK’s leading online electrical retailers, that is dedicated to giving its customers an exceptional experience, throughout the purchasing journey. From choosing the right item for their needs, ordering on its website to delivery of the item at a time that suits them, AO.com is passionate about creating happy customers..</p>\n<p>One of their ways of achieving this was to spawn their Single Customer View (SCV) team. They play a key role in helping the company stay compliant with user privacy and GDPR legislation. Until recently, their tech stack was made up of everything you’d expect: containers, EC2, Kafka, SQL Server.</p>\n<p>Upcoming GDPR legislation gave them the opportunity to try something new.</p>\n<h4>GDPR compliance pushes them toward serverless</h4>\n<p>At pace, the SCV team needed to build an entirely new feature to help make sure AO.com were compliant with new GDPR legislation due to come into force.</p>\n<p>The SCV team thought about what this would mean for them. They’d have to set up the containers, provision the server resources, they needed to consider load balancing and security concerns (like patching), and ship a fail-proof feature in less than two weeks, with a relatively small team. The team knew they could have a far bigger impact by trying something new.</p>\n<p>So they started looking at more time-efficient options. Some people on the team had already played around with AWS Lambda and the Serverless Framework, and it seemed promising.</p>\n<p>So the AO.com team committed. They decided to build a new GDPR feature in a serverless way. It was the team’s first production serverless application—and such a resounding success, the team has never looked back. </p>\n<p>They’ve gone all-in on serverless for every new feature since, truly adopting the Serverless First mindset.</p>\n<h5>The process: building the first serverless feature</h5>\n<p>Lambda + the Serverless Framework empowered the AO.com team to complete their new feature in only three days.</p>\n<p>After the feature was launched, they did not have to think about constantly monitoring the feature to make sure it wouldn’t go down, since Lambda scales automatically with demand.</p>\n<blockquote>\n<p>In 3 days, we had something running in production. This was so successful for the business that we started to build even more features with Serverless.</p>\n</blockquote>\n<p>—Jon Vines, AO.com Software Development Team Lead</p>\n<p>They kept building new API-based services with Serverless. They built a subject access request feature (another aspect of GDPR compliance), then right to be forgotten requests, and a whole suite of other user-facing features.</p>\n<p>The architecture for these APIs is pretty straightforward: the Serverless Framework defines their Lambda functions, which then interfaces with SNS and S3 buckets.</p>\n<img src=\"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/ao-com-story/Serverless-Architecture-AO1.png\">\n<p>They were able to ship each successive feature in only a few days as well. And their Lambda cost for all this?</p>\n<p>Less than $15 a month.</p>\n<h4>From APIs to full serverless data pipelines</h4>\n<p>One of the AO.com team’s core competencies was building data pipelines and getting that data to the right teams. Their initial architecture used Kafka on EC2 instances, with services deployed in containers in ECS.</p>\n<p>The team were happy with the robustness of this solution and they now had the opportunity to make it more efficient. The nature of the architecture meant that any time they wanted to deploy changes, they had to redeploy the entire functionality for the whole pipeline. It also meant scaling of functionality was across the whole service, and not the individual features.</p>\n<h5>Moving their data pipelines to Lambda with the Serverless Framework</h5>\n<p>The AO team decided to integrate Lambda into their data pipeline. This would give them the ability to easily make incremental deployments, and the pipeline would scale automatically as needed.</p>\n<p>They kept Kafka in place, but now interface with Kafka using Lambda and S3 buckets. So their current serverless data pipeline architecture looks like this:</p>\n<img src=\"https://s3-us-west-2.amazonaws.com/assets.blog.serverless.com/ao-com-story/Serverless-Architecture-AO2.png\">\n<blockquote>\n<p>“We went from managing servers, containers and scaling policies, to pointing to Lambda using S3 buckets and triggers. No need to manage or scale, and it’s so much less of a burden. It’s been a massive win for us.”</p>\n</blockquote>\n<p><em>-Jon Vines, AO.com Software Development Team Lead</em></p>\n<h4>Challenges along the way</h4>\n<p>The AO.com team was most familiar with .NET, and decided to continue developing in .NET even after moving to serverless and Lambda.</p>\n<p>The serverless ecosystem is primarily <a href=\"https://serverless.com/blog/serverless-by-the-numbers-2018-data-report/#top-languages\">focused on languages such as JavaScript, and Python</a>. This meant it was more challenging to find .NET examples, however, the team contributed back with posts <a href=\"https://medium.com/@jonvines/lessons-learned-in-serverless-6a4acc489d55\">on their learnings</a>. In other areas, the tooling for .NET in observability and monitoring weren’t as advanced, but this is improving all the time.</p>\n<p>Most impactfully, when dealing with Lambda functions, developers will have to work around cold starts. Cold starts are fairly minor in languages like JavaScript or Python, but in .NET could be as much as 3-5 seconds. The AO.com team is working around this by tweaking their Lambda provisioning.</p>\n<p>Overall, Jon Vines, Team Lead at AO.com, said he’d still choose .NET again. “We’re more familiar with it, and it’s just easier for us. The gains we see from Serverless are worth the trade-off.”</p>\n<h4>Company-wide change</h4>\n<p>The SCV team at AO.com is just one of many. After seeing the huge impact serverless has made in the SCV team, other teams at AO.com are beginning to experiment with and adopt serverless as well.</p>\n<blockquote>\n<p>”We’re still pretty early in our Serverless journey here at AO. I can’t wait to see what things shape up like in the next year.”</p>\n</blockquote>\n<p><em>-Jon Vines, AO.com Software Development Team Lead</em></p>","frontmatter":{"title":"AO.com: the path to Serverless First","date":"April 24, 2019","description":"The SCV team at AO.com started with one serverless service. They were so impressed with the turnaround time and low maintenance overhead that the entire team went Serverless First."}}},"pageContext":{"slug":"/posts/2019-04-24-ao-serverless-first/","previous":{"fields":{"slug":"/posts/2019-04-23-framework-release-v141/"},"frontmatter":{"title":"Serverless Framework v1.41 - X-Ray for API Gateway, Invoke Local with Docker Improvements & More"}},"next":{"fields":{"slug":"/posts/2019-04-30-framework-enterprise-error-insights/"},"frontmatter":{"title":"Serverless Framework Enterprise 0.9.0 - Error Insights"}}}}}